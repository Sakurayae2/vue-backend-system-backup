{"remainingRequest":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\node_modules\\_vue-loader@15.9.8@vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\src\\views\\permission\\role.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\src\\views\\permission\\role.vue","mtime":1637930052000},{"path":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\node_modules\\_babel-loader@8.2.3@babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\node_modules\\_vue-loader@15.9.8@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgeyBnZXRSb2xlLCBnZXRSb2xlSUQsIGFkZFJvbGUsIGRlbGV0ZVJvbGUsIGVkaXRSb2xlIH0gZnJvbSAnQC9hcGkvcm9sZScKaW1wb3J0IHsgZ2V0bWVudSB9IGZyb20gJ0AvYXBpL3Blcm1pc3Npb24nCgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRlZmF1bHRQcm9wczogewogICAgICAgIGNoaWxkcmVuOiAnY2hpbGQnLAogICAgICAgIGxhYmVsOiAnbmFtZScKICAgICAgfSwKICAgICAgLy8g6I635Y+W55So5oi35YiX6KGo5p+l6K+i5Y+C5pWw5a+56LGhLHBhZ2VudW065b2T5YmN6aG15pWwLHBhZ2VzaXplOuavj+mhteaYvuekuuWkmuWwkeaVsOaNrgogICAgICBxdWVyeUluZm86IHsKICAgICAgICBxdWVyeTogJycsCiAgICAgICAgcGFnZW51bTogMSwKICAgICAgICBwYWdlc2l6ZTogMTUKICAgICAgfSwKICAgICAgdG90bGU6IDAsCiAgICAgIC8vIOaJgOacieinkuiJsuWIl+ihqAogICAgICByb2xlc0xpc3Q6IFtdLAogICAgICAvLyDliIbphY3mnYPpmZDmoYYKICAgICAgc2V0UmlnaHREaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgLy8g5p2D6ZmQ5YiX6KGoCiAgICAgIHJpZ2h0c0xpc3Q6IFtdLAogICAgICAvLyAg5qCR5b2i5o6n5Lu255qE5bGe5oCn57uR5a6a5a+56LGhCiAgICAgIHRyZWVQcm9wczogewogICAgICAgIGxhYmVsOiAnYXV0aE5hbWUnLAogICAgICAgIGNoaWxkcmVuOiAnY2hpbGRyZW4nCiAgICAgIH0sCiAgICAgIC8vICAg6buY6K6k6YCJ5Lit6IqC54K5SUTlgLwKICAgICAgZGVmS2V5czogW10sCiAgICAgIC8vIOW9k+WJjemAieS4reiKgueCuUlE5YC8CiAgICAgIGN1cnJlbnROb2RlS2V5OiBbXSwKICAgICAgLy8gICDmt7vliqDop5LoibLlr7nor53moYYKICAgICAgQWRkUm9sZURpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICAvLyDmt7vliqDop5LoibLooajljZUKICAgICAgYWRkUm9sZUZvcm06IHt9LAogICAgICAvLyAgIOa3u+WKoOinkuiJsuihqOWNlemqjOivgQogICAgICBhZGRSb2xlRm9ybVJ1bGVzOiB7CiAgICAgICAgbmFtZTogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeinkuiJsuWQjeensCcsIHRyaWdnZXI6ICdibHVyJyB9LAogICAgICAgICAgeyBtaW46IDIsIG1heDogMTAsIG1lc3NhZ2U6ICfop5LoibLnmoTplb/luqblnKgy772eMTDkuKrlrZcnLCB0cmlnZ2VyOiAnYmx1cicgfQogICAgICAgIF0sCiAgICAgICAga2V5OiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl5ZSv5LiA5qCH6K+GJywgdHJpZ2dlcjogJ2JsdXInIH0sCiAgICAgICAgICB7IG1pbjogMSwgbWF4OiAxMCwgbWVzc2FnZTogJ+inkuiJsueahOmVv+W6puWcqDHvvZ4xMOS4quWtlycsIHRyaWdnZXI6ICdibHVyJyB9CiAgICAgICAgXQogICAgICB9LAogICAgICAvLyDnvJbovpHop5LoibLkv6Hmga8KICAgICAgZWRpdFJvbGVGb3JtOiB7fSwKICAgICAgZWRpdFJvbGVEaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgZWRpdEluZGV4OiAnJywKICAgICAgZWRpdFJvbGVGb3JtUnVsZXM6IHsKICAgICAgICBuYW1lOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl6KeS6Imy5ZCN56ewJywgdHJpZ2dlcjogJ2JsdXInIH0sCiAgICAgICAgICB7IG1pbjogMiwgbWF4OiAxMCwgbWVzc2FnZTogJ+inkuiJsueahOmVv+W6puWcqDLvvZ4xMOS4quWtlycsIHRyaWdnZXI6ICdibHVyJyB9CiAgICAgICAgXSwKICAgICAgICBrZXk6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXllK/kuIDmoIfor4YnLCB0cmlnZ2VyOiAnYmx1cicgfQogICAgICAgIF0KICAgICAgfSwKICAgICAgLy8g5b2T5YmN5Y2z5bCG5YiG6YWN5p2D6ZmQ55qESWQKICAgICAgcm9sZUlkOiAwLAogICAgICBtZW51OiBbXQogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0Um9sZXNMaXN0KCkKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldFJvbGVzTGlzdCgpIHsKICAgICAgdGhpcy5yb2xlc0xpc3QgPSBbXQogICAgICAvLyDmkJzntKJpZAogICAgICB2YXIgaWQgPSB0aGlzLnF1ZXJ5SW5mby5xdWVyeQogICAgICBpZiAoaWQpIHsKICAgICAgICBnZXRSb2xlSUQoaWQpLnRoZW4ocmVzID0+IHsKICAgICAgICAgIHZhciBkYXRhID0gcmVzLmRhdGEKICAgICAgICAgIHRoaXMucm9sZXNMaXN0LnB1c2goewogICAgICAgICAgICBpZDogZGF0YS5pZCwKICAgICAgICAgICAga2V5OiBkYXRhLmtleSwKICAgICAgICAgICAgcm9sZU5hbWU6IGRhdGEubmFtZQogICAgICAgICAgfSkKICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5p+l6K+i5oiQ5Yqf77yBJykKICAgICAgICB9KQogICAgICAgIHJldHVybgogICAgICB9CiAgICAgIC8vIOmhteeggQogICAgICBjb25zdCBwYXJhbXMgPSB7IHBhZ2U6IHRoaXMucXVlcnlJbmZvLnBhZ2VudW0sIHNpemU6IHRoaXMucXVlcnlJbmZvLnBhZ2VzaXplIH0KICAgICAgZ2V0Um9sZShwYXJhbXMpLnRoZW4ocmVzID0+IHsKICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMpCiAgICAgICAgdmFyIGRhdGEgPSByZXMuZGF0YQogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykgewogICAgICAgICAgdGhpcy5pZCA9IGRhdGFbaV0uaWQKICAgICAgICAgIHRoaXMucm9sZXNMaXN0LnB1c2goewogICAgICAgICAgICBpZDogZGF0YVtpXS5pZCwKICAgICAgICAgICAga2V5OiBkYXRhW2ldLmtleSwKICAgICAgICAgICAgcm9sZU5hbWU6IGRhdGFbaV0ubmFtZSwKICAgICAgICAgICAgbWVudXM6IGRhdGFbaV0ubWVudXMKICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIC8vIOebkeWQrCBwYWdlc2l6ZSDmlLnlj5jnmoTkuovku7YKICAgIGhhbmRsZVNpemVDaGFuZ2UobmV3U2l6ZSkgewogICAgICB0aGlzLnF1ZXJ5SW5mby5wYWdlc2l6ZSA9IG5ld1NpemUKICAgICAgdGhpcy5nZXRSb2xlc0xpc3QoKQogICAgfSwKICAgIC8vIOebkeWQrCDpobXnoIHlgLxwYWdlbnVtIOaUueWPmOS6i+S7tgogICAgaGFuZGxlQ3VycmVudENoYW5nZShuZXdTaXplKSB7CiAgICAgIHRoaXMucXVlcnlJbmZvLnBhZ2VudW0gPSBuZXdTaXplCiAgICAgIHRoaXMuZ2V0Um9sZXNMaXN0KCkKICAgIH0sCiAgICAvLyDmnYPpmZDlr7nor53moYblhbPpl63kuovku7YKICAgIHNldFJpZ2h0RGlhbG9nQ2xvc2VkKCkgewogICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmRlZktleXMpCiAgICAgIC8vIHRoaXMuZGVmS2V5cyA9IFtdCiAgICB9LAogICAgLy8g5re75Yqg6KeS6ImyCiAgICBhZGRSb2xlcygpIHsKICAgICAgY29uc3QgZGF0YSA9IHsKICAgICAgICBuYW1lOiB0aGlzLmFkZFJvbGVGb3JtLm5hbWUsCiAgICAgICAga2V5OiB0aGlzLmFkZFJvbGVGb3JtLmtleQogICAgICB9CiAgICAgIGFkZFJvbGUoZGF0YSkudGhlbigoKSA9PiB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmt7vliqDop5LoibLmiJDlip/vvIEnKQogICAgICAgIHRoaXMuZ2V0Um9sZXNMaXN0KCkKICAgICAgfSkKICAgICAgdGhpcy5BZGRSb2xlRGlhbG9nVmlzaWJsZSA9IGZhbHNlCiAgICB9LAogICAgLy8g5Yig6Zmk6KeS6ImyCiAgICByZW1vdmVSb2xlQnlJZChpZCkgewogICAgICB0aGlzLiRjb25maXJtKCfmraTmk43kvZzlsIbmsLjkuYXliKDpmaTor6XnlKjmiLcsIOaYr+WQpue7p+e7rT8nLCAn5o+Q56S6JywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgLy8g5Yig6Zmk6KeS6ImyCiAgICAgICAgZGVsZXRlUm9sZShpZCkudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLmdldFJvbGVzTGlzdCgpCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+WIoOmZpOaIkOWKn++8gScpCiAgICAgICAgfSkKICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgIHRoaXMuJG1lc3NhZ2UuaW5mbygn5bey5Y+W5raI5Yig6ZmkJykKICAgICAgfSkKICAgIH0sCiAgICAvLyDnvJbovpHop5LoibIKICAgIHNob3dFZGl0RGlhbG9nKGN1cnJlbnRSb3csIGluZGV4KSB7CiAgICAgIHRoaXMuZWRpdEluZGV4ID0gaW5kZXgKICAgICAgdGhpcy5lZGl0Um9sZUZvcm0uaWQgPSBjdXJyZW50Um93LmlkCiAgICAgIHRoaXMuJHNldCh0aGlzLmVkaXRSb2xlRm9ybSwgJ25hbWUnLCBjdXJyZW50Um93LnJvbGVOYW1lKQogICAgICB0aGlzLiRzZXQodGhpcy5lZGl0Um9sZUZvcm0sICdrZXknLCBjdXJyZW50Um93LmtleSkKICAgICAgdGhpcy5lZGl0Um9sZURpYWxvZ1Zpc2libGUgPSB0cnVlCiAgICB9LAogICAgZWRpdFJvbGVzKCkgewogICAgICBjb25zdCBpZCA9IHRoaXMuZWRpdFJvbGVGb3JtLmlkCiAgICAgIGNvbnN0IGRhdGEgPSB7CiAgICAgICAgbmFtZTogdGhpcy5lZGl0Um9sZUZvcm0ubmFtZSwKICAgICAgICBrZXk6IHRoaXMuZWRpdFJvbGVGb3JtLmtleQogICAgICB9CiAgICAgIGNvbnNvbGUubG9nKGRhdGEpCiAgICAgIGVkaXRSb2xlKGlkLCBkYXRhKS50aGVuKCgpID0+IHsKICAgICAgICAvLyB0aGlzLmdldFJvbGVzTGlzdCgpCiAgICAgICAgdGhpcy5yb2xlc0xpc3RbdGhpcy5lZGl0SW5kZXhdLnJvbGVOYW1lID0gZGF0YS5uYW1lCiAgICAgICAgdGhpcy5yb2xlc0xpc3RbdGhpcy5lZGl0SW5kZXhdLmtleSA9IGRhdGEua2V5CiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfkv67mlLnop5LoibLkv6Hmga/miJDlip/vvIEnKQogICAgICB9KQogICAgICAvLyDpmpDol4/nvJbovpHop5LoibLlr7nor53moYYKICAgICAgdGhpcy5lZGl0Um9sZURpYWxvZ1Zpc2libGUgPSBmYWxzZQogICAgfSwKICAgIC8vIOWIhumFjeadg+mZkOiPnOWNlQogICAgZ2V0TWVudSgpIHsKICAgICAgY29uc3QgZGF0YSA9IHsgZHJvcDogdHJ1ZSwgdHJlZTogdHJ1ZSwgbGV2ZWw6IDEgfQogICAgICBnZXRtZW51KGRhdGEpLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLm1lbnUgPSByZXMuZGF0YQogICAgICB9KQogICAgfSwKICAgIHNob3dTZXRSaWdodERpYWxvZyhyb2xlKSB7CiAgICAgIHRoaXMucm9sZUlkID0gcm9sZS5pZAogICAgICBpZiAoIXRoaXMubWVudS5sZW5ndGgpIHsgdGhpcy5nZXRNZW51KCkgfQogICAgICBpZiAoIXRoaXMuZGVmS2V5cy5sZW5ndGgpIHsgdGhpcy5kZWZLZXlzID0gcm9sZS5tZW51cyB9CiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICB0aGlzLiRyZWZzLnRyZWVSZWYuc2V0Q2hlY2tlZEtleXMocm9sZS5tZW51cykKICAgICAgfSkKICAgICAgdGhpcy5zZXRSaWdodERpYWxvZ1Zpc2libGUgPSB0cnVlCiAgICB9LAogICAgLy8g5YiG6YWN5p2D6ZmQ6I+c5Y2VCiAgICBhbGxvdFJpZ2h0cygpIHsKICAgICAgZWRpdFJvbGUodGhpcy5yb2xlSWQsIHsgbWVudXM6IHRoaXMuY3VycmVudE5vZGVLZXkgfSkudGhlbigoKSA9PiB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfliIbphY3oj5zljZXmiJDlip/vvIEnKQogICAgICAgIHRoaXMuZGVmS2V5cyA9IFtdCiAgICAgICAgdGhpcy5nZXRSb2xlc0xpc3QoKQogICAgICB9KQogICAgICB0aGlzLnNldFJpZ2h0RGlhbG9nVmlzaWJsZSA9IGZhbHNlCiAgICB9LAogICAgaGFuZGxlQ2hlY2tDaGFuZ2UoKSB7CiAgICAgIHRoaXMuY3VycmVudE5vZGVLZXkgPSBbXQogICAgICBjb25zdCByZXMgPSB0aGlzLiRyZWZzLnRyZWVSZWYuZ2V0Q2hlY2tlZE5vZGVzKGZhbHNlLCB0cnVlKQogICAgICByZXMuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICB0aGlzLmN1cnJlbnROb2RlS2V5LnB1c2goaXRlbS5pZCkKICAgICAgfSkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["role.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0IA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"role.vue","sourceRoot":"src/views/permission","sourcesContent":["<template>\n  <div>\n    <!-- 卡片视图 -->\n    <el-card>\n      <!-- 添加角色按钮 -->\n      <el-row :gutter=\"20\" style=\"margin-bottom: 20px;\">\n        <el-col :span=\"6\">\n          <el-input v-model=\"queryInfo.query\" placeholder=\"请输入ID\" clearable>\n            <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"getRolesList\" />\n          </el-input>\n        </el-col>\n        <el-col :span=\"4\">\n          <el-button type=\"primary\" style=\"margin-bottom: 10px;\" @click=\"AddRoleDialogVisible=true\">添加角色</el-button>\n        </el-col>\n      </el-row>\n      <!-- 角色列表 -->\n      <el-table :data=\"rolesList\" border stripe>\n        <el-table-column type=\"index\" label=\"#\" align=\"center\" />\n        <el-table-column label=\"角色ID\" prop=\"id\" align=\"center\" />\n        <el-table-column label=\"角色名称\" prop=\"roleName\" align=\"center\" />\n        <el-table-column label=\"唯一标识key\" prop=\"key\" align=\"center\" />\n        <el-table-column label=\"操作\" width=\"300px\" align=\"center\">\n          <template slot-scope=\"scope\">\n            <el-button\n              type=\"primary\"\n              icon=\"el-icon-edit\"\n              size=\"mini\"\n              @click=\"showEditDialog(scope.row,scope.$index)\"\n            >编辑\n            </el-button>\n            <el-button\n              v-if=\"scope.row.id !== 1\"\n              type=\"danger\"\n              icon=\"el-icon-delete\"\n              size=\"mini\"\n              @click=\"removeRoleById(scope.row.id)\"\n            >删除\n            </el-button>\n            <el-button\n              type=\"warning\"\n              icon=\"el-icon-setting\"\n              size=\"mini\"\n              @click=\"showSetRightDialog(scope.row)\"\n            >分配菜单\n            </el-button>\n<!--            <el-button-->\n<!--              v-if=\"scope.row.id === 1\"-->\n<!--              type=\"info\"-->\n<!--              size=\"small\"-->\n<!--              disabled-->\n<!--            >无法对管理员进行操作-->\n<!--            </el-button>-->\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <!-- 分页区域 -->\n      <el-pagination\n        :current-page=\"queryInfo.pagenum\"\n        :page-sizes=\"[10, 15, 20]\"\n        :page-size=\"queryInfo.pagesize\"\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=\"totle\"\n        style=\"margin-top: 20px;\"\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n      />\n    </el-card>\n    <!-- 分配权限 -->\n    <el-dialog\n      title=\"分配权限\"\n      :visible.sync=\"setRightDialogVisible\"\n      width=\"50%\"\n      @close=\"setRightDialogClosed\"\n    >\n      <el-tree\n        ref=\"treeRef\"\n        :data=\"menu\"\n        :props=\"defaultProps\"\n        show-checkbox\n        check-strictly\n        node-key=\"id\"\n        default-expand-all\n        :default-checked-keys=\"defKeys\"\n        @check=\"handleCheckChange\"\n      />\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"setRightDialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"allotRights\">确 定</el-button>\n      </span>\n    </el-dialog>\n\n    <!-- 添加角色对话框 -->\n    <el-dialog title=\"添加角色\" :visible.sync=\"AddRoleDialogVisible\" width=\"40%\">\n      <el-form\n        ref=\"addRoleFormRef\"\n        :model=\"addRoleForm\"\n        :rules=\"addRoleFormRules\"\n        label-width=\"110px\"\n      >\n        <el-form-item label=\"角色名称\" prop=\"name\">\n          <el-input v-model=\"addRoleForm.name\"/>\n        </el-form-item>\n        <el-form-item label=\"唯一标识key\" prop=\"key\">\n          <el-input v-model=\"addRoleForm.key\"/>\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"AddRoleDialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"addRoles\">确 定</el-button>\n      </span>\n    </el-dialog>\n\n    <!-- 编辑角色对话框 -->\n    <el-dialog title=\"编辑角色\" :visible.sync=\"editRoleDialogVisible\" width=\"40%\">\n      <el-form\n        ref=\"editRoleFormRef\"\n        :model=\"editRoleForm\"\n        :rules=\"editRoleFormRules\"\n        label-width=\"100px\"\n      >\n        <el-form-item label=\"角色名称\" prop=\"name\">\n          <el-input v-model=\"editRoleForm.name\"/>\n        </el-form-item>\n        <el-form-item label=\"唯一标识\" prop=\"key\">\n          <el-input v-model=\"editRoleForm.key\"/>\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"editRoleDialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"editRoles\">确 定</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n\nimport { getRole, getRoleID, addRole, deleteRole, editRole } from '@/api/role'\nimport { getmenu } from '@/api/permission'\n\nexport default {\n  data() {\n    return {\n      defaultProps: {\n        children: 'child',\n        label: 'name'\n      },\n      // 获取用户列表查询参数对象,pagenum:当前页数,pagesize:每页显示多少数据\n      queryInfo: {\n        query: '',\n        pagenum: 1,\n        pagesize: 15\n      },\n      totle: 0,\n      // 所有角色列表\n      rolesList: [],\n      // 分配权限框\n      setRightDialogVisible: false,\n      // 权限列表\n      rightsList: [],\n      //  树形控件的属性绑定对象\n      treeProps: {\n        label: 'authName',\n        children: 'children'\n      },\n      //   默认选中节点ID值\n      defKeys: [],\n      // 当前选中节点ID值\n      currentNodeKey: [],\n      //   添加角色对话框\n      AddRoleDialogVisible: false,\n      // 添加角色表单\n      addRoleForm: {},\n      //   添加角色表单验证\n      addRoleFormRules: {\n        name: [\n          { required: true, message: '请输入角色名称', trigger: 'blur' },\n          { min: 2, max: 10, message: '角色的长度在2～10个字', trigger: 'blur' }\n        ],\n        key: [\n          { required: true, message: '请输入唯一标识', trigger: 'blur' },\n          { min: 1, max: 10, message: '角色的长度在1～10个字', trigger: 'blur' }\n        ]\n      },\n      // 编辑角色信息\n      editRoleForm: {},\n      editRoleDialogVisible: false,\n      editIndex: '',\n      editRoleFormRules: {\n        name: [\n          { required: true, message: '请输入角色名称', trigger: 'blur' },\n          { min: 2, max: 10, message: '角色的长度在2～10个字', trigger: 'blur' }\n        ],\n        key: [\n          { required: true, message: '请输入唯一标识', trigger: 'blur' }\n        ]\n      },\n      // 当前即将分配权限的Id\n      roleId: 0,\n      menu: []\n    }\n  },\n  created() {\n    this.getRolesList()\n  },\n  methods: {\n    getRolesList() {\n      this.rolesList = []\n      // 搜索id\n      var id = this.queryInfo.query\n      if (id) {\n        getRoleID(id).then(res => {\n          var data = res.data\n          this.rolesList.push({\n            id: data.id,\n            key: data.key,\n            roleName: data.name\n          })\n          this.$message.success('查询成功！')\n        })\n        return\n      }\n      // 页码\n      const params = { page: this.queryInfo.pagenum, size: this.queryInfo.pagesize }\n      getRole(params).then(res => {\n        // console.log(res)\n        var data = res.data\n        for (var i = 0; i < data.length; i++) {\n          this.id = data[i].id\n          this.rolesList.push({\n            id: data[i].id,\n            key: data[i].key,\n            roleName: data[i].name,\n            menus: data[i].menus\n          })\n        }\n      })\n    },\n    // 监听 pagesize 改变的事件\n    handleSizeChange(newSize) {\n      this.queryInfo.pagesize = newSize\n      this.getRolesList()\n    },\n    // 监听 页码值pagenum 改变事件\n    handleCurrentChange(newSize) {\n      this.queryInfo.pagenum = newSize\n      this.getRolesList()\n    },\n    // 权限对话框关闭事件\n    setRightDialogClosed() {\n      // console.log(this.defKeys)\n      // this.defKeys = []\n    },\n    // 添加角色\n    addRoles() {\n      const data = {\n        name: this.addRoleForm.name,\n        key: this.addRoleForm.key\n      }\n      addRole(data).then(() => {\n        this.$message.success('添加角色成功！')\n        this.getRolesList()\n      })\n      this.AddRoleDialogVisible = false\n    },\n    // 删除角色\n    removeRoleById(id) {\n      this.$confirm('此操作将永久删除该用户, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        // 删除角色\n        deleteRole(id).then(() => {\n          this.getRolesList()\n          this.$message.success('删除成功！')\n        })\n      }).catch(() => {\n        this.$message.info('已取消删除')\n      })\n    },\n    // 编辑角色\n    showEditDialog(currentRow, index) {\n      this.editIndex = index\n      this.editRoleForm.id = currentRow.id\n      this.$set(this.editRoleForm, 'name', currentRow.roleName)\n      this.$set(this.editRoleForm, 'key', currentRow.key)\n      this.editRoleDialogVisible = true\n    },\n    editRoles() {\n      const id = this.editRoleForm.id\n      const data = {\n        name: this.editRoleForm.name,\n        key: this.editRoleForm.key\n      }\n      console.log(data)\n      editRole(id, data).then(() => {\n        // this.getRolesList()\n        this.rolesList[this.editIndex].roleName = data.name\n        this.rolesList[this.editIndex].key = data.key\n        this.$message.success('修改角色信息成功！')\n      })\n      // 隐藏编辑角色对话框\n      this.editRoleDialogVisible = false\n    },\n    // 分配权限菜单\n    getMenu() {\n      const data = { drop: true, tree: true, level: 1 }\n      getmenu(data).then(res => {\n        this.menu = res.data\n      })\n    },\n    showSetRightDialog(role) {\n      this.roleId = role.id\n      if (!this.menu.length) { this.getMenu() }\n      if (!this.defKeys.length) { this.defKeys = role.menus }\n      this.$nextTick(() => {\n        this.$refs.treeRef.setCheckedKeys(role.menus)\n      })\n      this.setRightDialogVisible = true\n    },\n    // 分配权限菜单\n    allotRights() {\n      editRole(this.roleId, { menus: this.currentNodeKey }).then(() => {\n        this.$message.success('分配菜单成功！')\n        this.defKeys = []\n        this.getRolesList()\n      })\n      this.setRightDialogVisible = false\n    },\n    handleCheckChange() {\n      this.currentNodeKey = []\n      const res = this.$refs.treeRef.getCheckedNodes(false, true)\n      res.forEach(item => {\n        this.currentNodeKey.push(item.id)\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n</style>\n"]}]}