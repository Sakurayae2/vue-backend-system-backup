{"remainingRequest":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\node_modules\\_vue-loader@15.9.8@vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\src\\views\\award\\deblocking.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\src\\views\\award\\deblocking.vue","mtime":1637930052000},{"path":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\node_modules\\_babel-loader@8.2.3@babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\node_modules\\_vue-loader@15.9.8@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldERlYmxvY2tpbmdMaXN0LCBkb25lRGVibG9ja2luZywgdW5ibG9jayB9IGZyb20gJ0AvYXBpL2F3YXJkJwppbXBvcnQgcXMgZnJvbSAncXMnCgpleHBvcnQgZGVmYXVsdCB7CiAgaW5qZWN0OiBbJ3JlbG9hZCddLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICAvLyBpbWd1cmw6J2h0dHBzOi8vZnVzczEwLmVsZW1lY2RuLmNvbS9lLzVkLzRhNzMxYTkwNTk0YTRhZjU0NGMwYzI1OTQxMTcxanBlZy5qcGVnJywKICAgICAgc3JjTGlzdDogW10sCiAgICAgIHNlYXJjaFN0YXRlOiAnJywKICAgICAgc2VsZWN0OiAnJywKICAgICAgcmVwb3J0TGlzdDogW10sCiAgICAgIHNlYXJjaDogewogICAgICAgIHN0YXRlOiAnJywKICAgICAgICBwYWdlOiAxLAogICAgICAgIHNpemU6IDEwCiAgICAgIH0sCiAgICAgIHRvdGxlOiAwCiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5zZWFyY2guc3RhdGUgPSB0aGlzLiRzdG9yZS5zdGF0ZS5jYWNoZS5kZWJsb2NraW5nCiAgICB0aGlzLmFwcGx5RGVibG9ja2luZ0xpc3QoKQogIH0sCiAgbWV0aG9kczogewogICAgLy8g5aSn5Zu+6aKE6KeICiAgICBhZGRQcmV2aWV3KGltZ3VybCkgewogICAgICB0aGlzLnNyY0xpc3QgPSBbXQogICAgICB0aGlzLnNyY0xpc3QucHVzaChpbWd1cmwpCiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAvLyDojrflj5bpga7nvanlsYJkb20KICAgICAgICBsZXQgZG9tSW1hZ2VNYXNrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVsLWltYWdlLXZpZXdlcl9fbWFzaycpCiAgICAgICAgaWYgKCFkb21JbWFnZU1hc2spIHsKICAgICAgICAgIHJldHVybgogICAgICAgIH0KICAgICAgICBkb21JbWFnZU1hc2suYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7CiAgICAgICAgICAvLyDngrnlh7vpga7nvanlsYLml7bosIPnlKjlhbPpl63mjInpkq7nmoQgY2xpY2sg5LqL5Lu2CiAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWwtaW1hZ2Utdmlld2VyX19jbG9zZScpLmNsaWNrKCkKICAgICAgICB9KQogICAgICB9KQogICAgfSwKICAgIGFwcGx5RGVibG9ja2luZ0xpc3QoKSB7CiAgICAgIGdldERlYmxvY2tpbmdMaXN0KHFzLnN0cmluZ2lmeSh0aGlzLnNlYXJjaCkpLnRoZW4ocmVzID0+IHsKICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YS5yZXREYXRhKQogICAgICAgIHRoaXMucmVwb3J0TGlzdCA9IHJlcy5kYXRhLnJldERhdGEucmVzdWx0cwogICAgICAgIHRoaXMudG90bGUgPSByZXMuZGF0YS5yZXREYXRhLnRvdGFsCiAgICAgICAgdGhpcy5yZXBvcnRMaXN0LmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgICBpdGVtLnN0YXRlID0gaXRlbS5zdGF0ZSA9PSAtMSA/ICfmnKrpgJrov4cnIDogJ+W+heWkhOeQhicKICAgICAgICAgIGlmICh0eXBlb2YgKGl0ZW0uaW1hZ2VzKSA9PSAnc3RyaW5nJyAmJiBpdGVtLmltYWdlcy5pbmRleE9mKCcsJykgPT0gLTEpIHsKICAgICAgICAgICAgaXRlbS5pbWFnZXMgPSBbaXRlbS5pbWFnZXNdCiAgICAgICAgICB9CiAgICAgICAgICBpZiAoaXRlbS5pbWFnZXMgIT09IHVuZGVmaW5lZCAmJiBpdGVtLmltYWdlcy5pbmRleE9mKCcsJykgIT09IC0xKSB7CiAgICAgICAgICAgIGl0ZW0uaW1hZ2VzID0gdGhpcy5yZXBvcnRMaXN0LmltYWdlcy5zcGxpdCgnLCcpCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgfSkKICAgIH0sCiAgICBkZWJsb2NraW5nKHJvdykgewogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2RlYmxvY2tpbmcnLCB0aGlzLnNlYXJjaC5zdGF0ZSkKICAgICAgY29uc3QgZGF0YSA9IHsKICAgICAgICBibG9ja2l0ZW06IHJvdy5ibG9ja2l0ZW0sCiAgICAgICAgcmVhc29uOiByb3cuZGVzY3IKICAgICAgfQogICAgICBkb25lRGVibG9ja2luZyhxcy5zdHJpbmdpZnkoZGF0YSkpLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLmRhdGEucmV0RGF0YSA9PSAwKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmluZm8oJ+abtOaUueWksei0pSEnKQogICAgICAgIH0gZWxzZSBpZiAocmVzLmRhdGEucmV0RGF0YSA9PSBudWxsKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+abtOaUueaIkOWKnyEnKQogICAgICAgIH0KICAgICAgICB0aGlzLnJlbG9hZCgpCiAgICAgIH0pCiAgICB9LAogICAgdW5ibG9ja0RlYmxvY2tpbmcocm93KSB7CiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZGVibG9ja2luZycsIHRoaXMuc2VhcmNoLnN0YXRlKQogICAgICBjb25zdCBkYXRhID0gewogICAgICAgIHBpZDogMSwKICAgICAgICBwYXNzd29yZDogJzIzNjUxOTQzJywKICAgICAgICB1aW46IHJvdy5ibG9ja2VkdWluCiAgICAgIH0KICAgICAgdW5ibG9jayhxcy5zdHJpbmdpZnkoZGF0YSkpLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLnJlbG9hZCgpCiAgICAgIH0pCiAgICB9LAoKICAgIC8vIOebkeWQrCBwYWdlc2l6ZSDmlLnlj5jnmoTkuovku7YKICAgIGhhbmRsZVNpemVDaGFuZ2UobmV3U2l6ZSkgewogICAgICB0aGlzLnNlYXJjaC5zaXplID0gbmV3U2l6ZQogICAgICB0aGlzLmFwcGx5RGVibG9ja2luZ0xpc3QoKQogICAgfSwKICAgIC8vIOebkeWQrCDpobXnoIHlgLxwYWdlbnVtIOaUueWPmOS6i+S7tgogICAgaGFuZGxlQ3VycmVudENoYW5nZShuZXdTaXplKSB7CiAgICAgIHRoaXMuc2VhcmNoLnBhZ2UgPSBuZXdTaXplCiAgICAgIHRoaXMuYXBwbHlEZWJsb2NraW5nTGlzdCgpCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["deblocking.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"deblocking.vue","sourceRoot":"src/views/award","sourcesContent":["<template>\n  <div>\n    <!-- 举报 -->\n    <el-card style=\"margin: 10px;\">\n      <div>\n        <template>\n          <el-row :gutter=\"20\" style=\"margin-bottom: 20px;\">\n            <el-col style=\"width:450px;\">\n              <el-radio-group v-model=\"search.state\" @change=\"applyDeblockingList()\">\n                <el-radio-button label=\"\">全部</el-radio-button>\n                <el-radio-button label=\"0\">待处理</el-radio-button>\n                <el-radio-button label=\"-1\">未通过</el-radio-button>\n              </el-radio-group>\n            </el-col>\n          </el-row>\n        </template>\n      </div>\n      <el-table :data=\"reportList\" stripe style=\"width: 100%\">\n        <el-table-column type=\"index\" label=\"#\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"state\" label=\"状态\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"blockeduin\" label=\"被封锁人id\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"blockednick\" label=\"被封锁人昵称\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"blockitem\" label=\"被封锁项\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"descr\" label=\"被封锁原因\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"images\" label=\"图片\" align=\"center\">\n          <template scope=\"scope\">\n            <div v-for=\"(item,index) in reportList[scope.$index].images\" :key=\"index\">\n              <el-image :src=\"item\" style=\"width:100px;height:100px;\"\n                        :preview-src-list=\"srcList\"\n                        @click=\"addPreview(item)\"\n              ></el-image>\n            </div>\n            <!-- <el-image :src=\"imgurl\"\n                :preview-src-list=\"srcList\"\n                @click=\"addPreview(imgurl)\">\n            </el-image> -->\n          </template>\n        </el-table-column>\n        <el-table-column label=\"操作\" align=\"center\">\n          <template scope=\"scope\">\n            <el-button\n              class=\"tableBtn\"\n              type=\"primary\"\n              size=\"small\"\n              @click=\"deblocking(scope.row)\"\n            >解封\n            </el-button>\n            <el-button\n              class=\"tableBtn\"\n              type=\"danger\"\n              size=\"small\"\n              @click=\"unblockDeblocking(scope.row)\"\n            >不解封\n            </el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <el-pagination\n        :current-page=\"search.page\"\n        :page-sizes=\"[10, 20, 30]\"\n        :page-size=\"search.size\"\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=\"totle\"\n        style=\"margin-top: 20px;\"\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n      />\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport { getDeblockingList, doneDeblocking, unblock } from '@/api/award'\nimport qs from 'qs'\n\nexport default {\n  inject: ['reload'],\n  data() {\n    return {\n      // imgurl:'https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg',\n      srcList: [],\n      searchState: '',\n      select: '',\n      reportList: [],\n      search: {\n        state: '',\n        page: 1,\n        size: 10\n      },\n      totle: 0\n    }\n  },\n  created() {\n    this.search.state = this.$store.state.cache.deblocking\n    this.applyDeblockingList()\n  },\n  methods: {\n    // 大图预览\n    addPreview(imgurl) {\n      this.srcList = []\n      this.srcList.push(imgurl)\n      this.$nextTick(() => {\n        // 获取遮罩层dom\n        let domImageMask = document.querySelector('.el-image-viewer__mask')\n        if (!domImageMask) {\n          return\n        }\n        domImageMask.addEventListener('click', () => {\n          // 点击遮罩层时调用关闭按钮的 click 事件\n          document.querySelector('.el-image-viewer__close').click()\n        })\n      })\n    },\n    applyDeblockingList() {\n      getDeblockingList(qs.stringify(this.search)).then(res => {\n        // console.log(res.data.retData)\n        this.reportList = res.data.retData.results\n        this.totle = res.data.retData.total\n        this.reportList.forEach(item => {\n          item.state = item.state == -1 ? '未通过' : '待处理'\n          if (typeof (item.images) == 'string' && item.images.indexOf(',') == -1) {\n            item.images = [item.images]\n          }\n          if (item.images !== undefined && item.images.indexOf(',') !== -1) {\n            item.images = this.reportList.images.split(',')\n          }\n        })\n      })\n    },\n    deblocking(row) {\n      this.$store.commit('deblocking', this.search.state)\n      const data = {\n        blockitem: row.blockitem,\n        reason: row.descr\n      }\n      doneDeblocking(qs.stringify(data)).then(res => {\n        if (res.data.retData == 0) {\n          this.$message.info('更改失败!')\n        } else if (res.data.retData == null) {\n          this.$message.success('更改成功!')\n        }\n        this.reload()\n      })\n    },\n    unblockDeblocking(row) {\n      this.$store.commit('deblocking', this.search.state)\n      const data = {\n        pid: 1,\n        password: '23651943',\n        uin: row.blockeduin\n      }\n      unblock(qs.stringify(data)).then(res => {\n        this.reload()\n      })\n    },\n\n    // 监听 pagesize 改变的事件\n    handleSizeChange(newSize) {\n      this.search.size = newSize\n      this.applyDeblockingList()\n    },\n    // 监听 页码值pagenum 改变事件\n    handleCurrentChange(newSize) {\n      this.search.page = newSize\n      this.applyDeblockingList()\n    }\n  }\n}\n</script>\n\n<style scoped>\n.seachInput {\n  width: 400px;\n  margin: 0 20px 10px 0;\n}\n\n.addItem {\n  width: 400px;\n}\n\n.searchbtn {\n  margin-left: 10px;\n}\n\n.tableBtn {\n  margin: 3px;\n}\n</style>\n"]}]}