{"remainingRequest":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\node_modules\\_vue-loader@15.9.8@vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\src\\views\\permission\\menu.vue?vue&type=style&index=0&id=22ea92f5&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\src\\views\\permission\\menu.vue","mtime":1637930052000},{"path":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\node_modules\\_css-loader@3.6.0@css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\node_modules\\_vue-loader@15.9.8@vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\node_modules\\_postcss-loader@3.0.0@postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\node_modules\\_vue-loader@15.9.8@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmN1c3RvbS10cmVlLWNvbnRhaW5lciB7CiAgd2lkdGg6IDUwMHB4Owp9CgouY3VzdG9tLXRyZWUtbm9kZSB7CiAgZmxleDogMTsKICBkaXNwbGF5OiBmbGV4OwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogIGZvbnQtc2l6ZTogMTRweDsKICBwYWRkaW5nLXJpZ2h0OiA4cHg7Cn0K"},{"version":3,"sources":["menu.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsPA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"menu.vue","sourceRoot":"src/views/permission","sourcesContent":["<template>\n  <div>\n    <!-- 卡片视图 -->\n    <el-card>\n      <!-- 添加角色按钮 -->\n      <el-row :gutter=\"20\" style=\"margin-bottom: 30px;\">\n        <el-col :span=\"4\">\n          <el-button type=\"primary\" @click=\"showHandleAddDialog\">手动添加根菜单</el-button>\n        </el-col>\n      </el-row>\n      <div class=\"custom-tree-container\">\n        <div class=\"block\">\n          <p>权限菜单</p>\n          <el-tree\n            :data=\"menu\"\n            node-key=\"id\"\n            default-expand-all\n            :props=\"defaultProps\"\n            :expand-on-click-node=\"false\"\n          >\n            <span slot-scope=\"{ node, data }\" class=\"custom-tree-node\">\n              <span>{{ node.label }}</span>\n              <span>\n                <el-button\n                  v-if=\"data.id !== 1\"\n                  type=\"text\"\n                  size=\"mini\"\n                  @click=\"() => remove(node, data)\"\n                >\n                  删除\n                </el-button>\n                <el-button\n                  v-if=\"data.id !== 1\"\n                  type=\"text\"\n                  size=\"mini\"\n                  @click=\"showEditDialog(data)\"\n                >\n                  修改\n                </el-button>\n                <el-button\n                  type=\"text\"\n                  size=\"mini\"\n                  @click=\"showAddDialog(data)\"\n                >\n                  添加\n                </el-button>\n              </span>\n            </span>\n          </el-tree>\n        </div>\n      </div>\n    </el-card>\n\n    <!-- 添加菜单对话框 -->\n    <el-dialog title=\"添加菜单\" :visible.sync=\"AddMenuDialogVisible\" width=\"40%\">\n      <el-form\n        ref=\"addMenuFormRef\"\n        :model=\"addMenuForm\"\n        :rules=\"addMenuFormRules\"\n        label-width=\"110px\"\n      >\n        <el-form-item label=\"菜单名称\" prop=\"name\">\n          <el-input v-model=\"addMenuForm.name\" />\n        </el-form-item>\n        <el-form-item label=\"路径\" prop=\"path\">\n          <el-input v-model=\"addMenuForm.path\" />\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"AddMenuDialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"addMenus\">确 定</el-button>\n      </span>\n    </el-dialog>\n\n    <!-- 修改菜单对话框 -->\n    <el-dialog title=\"添加菜单\" :visible.sync=\"editMenuDialogVisible\" width=\"40%\">\n      <el-form\n        ref=\"editMenuFormRef\"\n        :model=\"editMenuForm\"\n        :rules=\"editMenuFormRules\"\n        label-width=\"110px\"\n      >\n        <el-form-item label=\"菜单名称\" prop=\"name\">\n          <el-input v-model=\"editMenuForm.name\" />\n        </el-form-item>\n        <el-form-item label=\"路径\" prop=\"path\">\n          <el-input v-model=\"editMenuForm.path\" />\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"editMenuDialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"editMenus\">确 定</el-button>\n      </span>\n    </el-dialog>\n\n    <!-- 手动添加菜单对话框 -->\n    <el-dialog title=\"添加菜单\" :visible.sync=\"handleAddMenuDialogVisible\" width=\"40%\">\n      <el-form\n        ref=\"handleEditMenuFormRef\"\n        :model=\"addMenuForm\"\n        :rules=\"addMenuFormRules\"\n        label-width=\"110px\"\n      >\n        <el-form-item label=\"菜单名称\" prop=\"name\">\n          <el-input v-model=\"addMenuForm.name\" />\n        </el-form-item>\n        <el-form-item label=\"前端路由\" prop=\"path\">\n          <el-input v-model=\"addMenuForm.path\" />\n        </el-form-item>\n        <el-form-item label=\"菜单级别\" prop=\"level\">\n          <el-input v-model=\"addMenuForm.level\" />\n        </el-form-item>\n        <el-form-item label=\"父菜单\" prop=\"parent\">\n          <el-input v-model=\"addMenuForm.parent\" />\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"handleAddMenuDialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"addMenus\">确 定</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { getmenu, deletemenu, editmenu, addmenu } from '@/api/permission'\n\nexport default {\n  data() {\n    return {\n      // 菜单列表\n      menu: [],\n      defaultProps: {\n        children: 'child',\n        label: 'name'\n      },\n      menuId: 100,\n      //   添加角色对话框\n      AddMenuDialogVisible: false,\n      //   手动添加对话框\n      handleAddMenuDialogVisible: false,\n      // 添加角色表单\n      addMenuForm: {},\n      //   添加角色表单验证\n      addMenuFormRules: {\n        name: [\n          { required: true, message: '请输入菜单名称', trigger: 'blur' },\n          { min: 2, max: 10, message: '菜单名称的长度在2～10个字', trigger: 'blur' }\n        ],\n        path: [\n          { required: true, message: '请输入路径', trigger: 'blur' }\n        ],\n        level: [\n          { required: true, message: '请输入菜单级别', trigger: 'blur' }\n        ],\n        parent: [\n          { required: true, message: '请输入父菜单id', trigger: 'blur' }\n        ]\n      },\n      //   修改角色对话框\n      editMenuDialogVisible: false,\n      // 修改角色表单\n      editMenuForm: {},\n      currentEditId: '',\n      //   添加角色表单验证\n      editMenuFormRules: {\n        name: [\n          { required: true, message: '请输入菜单名称', trigger: 'blur' },\n          { min: 2, max: 10, message: '菜单名称的长度在2～10个字', trigger: 'blur' }\n        ],\n        path: [\n          { required: true, message: '请输入路径', trigger: 'blur' },\n        ]\n      }\n    }\n  },\n  created() {\n    this.getMenu()\n  },\n  methods: {\n    getMenu() {\n      const data = { drop: true, tree: true, level: 1 }\n      getmenu(data).then(res => {\n        this.menu = res.data\n      })\n    },\n    // 显示添加菜单\n    showAddDialog(data) {\n      this.$set(this.addMenuForm, 'parent', data.id)\n      this.$set(this.addMenuForm, 'level', (data.level + 1))\n      this.AddMenuDialogVisible = true\n    },\n    showHandleAddDialog() {\n      this.handleAddMenuDialogVisible = true\n    },\n    // 添加菜单\n    addMenus() {\n      console.log(this.addMenuForm)\n      addmenu(this.addMenuForm).then(() => {\n        this.$message.success('添加菜单成功！')\n        this.addMenuForm = {}\n        this.getMenu()\n      })\n      this.handleAddMenuDialogVisible = false\n      this.AddMenuDialogVisible = false\n    },\n\n    // 删除菜单节点\n    remove(node, data) {\n      const parent = node.parent\n      const children = parent.data.child || parent.data\n      const index = children.findIndex(d => d.id === data.id)\n      this.$confirm('此操作将永久删除该文件, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        children.splice(index, 1)\n        // 接口后台删除\n        deletemenu(data.id).then(() => {\n        })\n\n        this.$message.success('删除成功！')\n      }).catch(() => {\n        this.$message.info('已取消删除！')\n      })\n    },\n    // 编辑菜单\n    showEditDialog(data) {\n      console.log(data)\n      this.currentEditId = data.id\n      this.editMenuDialogVisible = true\n    },\n    editMenus() {\n      editmenu(this.currentEditId, this.editMenuForm).then(() => {\n        this.$message.success('编辑菜单成功！')\n        this.editMenuForm = {}\n        this.getMenu()\n      })\n      this.editMenuDialogVisible = false\n    }\n  }\n}\n</script>\n\n<style scoped>\n.custom-tree-container {\n  width: 500px;\n}\n\n.custom-tree-node {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-size: 14px;\n  padding-right: 8px;\n}\n</style>\n"]}]}