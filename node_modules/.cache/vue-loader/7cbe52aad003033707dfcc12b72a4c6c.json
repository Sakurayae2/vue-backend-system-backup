{"remainingRequest":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\node_modules\\_vue-loader@15.9.8@vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\src\\views\\user\\block.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\src\\views\\user\\block.vue","mtime":1637930052000},{"path":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\node_modules\\_css-loader@3.6.0@css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\node_modules\\_vue-loader@15.9.8@vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\node_modules\\_postcss-loader@3.0.0@postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\node_modules\\_vue-loader@15.9.8@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouaGVscHsKICBmb250LXNpemU6IDMwcHg7CiAgbGluZS1oZWlnaHQ6IDQwcHg7CiAgY29sb3I6ICM5OTk7Cn0KLmltZ3sKICB3aWR0aDogNjBweDsKICBoZWlnaHQ6IDYwcHg7CiAgbWFyZ2luLXJpZ2h0OiAycHg7Cn0KLnVpbkNvbnRlbnR7CiAgYm9yZGVyLXJhZGl1czogMTBweDsKICBjdXJzb3I6IHBvaW50ZXI7Cn0KLmFjdGl2ZXsKICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsKICBjb2xvcjogcmdiYSgyNTUsMCwwLC44KTsKICBjdXJzb3I6IHBvaW50ZXI7Cn0K"},{"version":3,"sources":["block.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"block.vue","sourceRoot":"src/views/user","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-card>\n      <el-row type=\"flex\" justify=\"space-between\">\n        <el-col :span=\"8\">\n          <el-input v-model=\"queryInfo.blockitem\" placeholder=\"请输入uin/机器码\" clearable @keyup.enter.native=\"queryInfo.page = 1;getList()\">\n            <el-button slot=\"append\" icon=\"el-icon-search\" @click.native=\"queryInfo.page = 1;getList()\" />\n          </el-input>\n        </el-col>\n      </el-row>\n      <!--   表格区域   -->\n      <el-table :data=\"tableData\">\n        <el-table-column type=\"index\" label=\"#\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"date\" label=\"头像\" align=\"center\">\n          <template slot-scope=\"scope\">\n            <div class=\"avatar\">\n              <el-avatar :size=\"60\" :src=\"tableData[scope.$index].head\"></el-avatar>\n            </div>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"uin\" label=\"uin\" align=\"center\" min-width=\"160\">\n          <template slot-scope=\"scope\">\n            <div>\n              <p\n                style=\"white-space: nowrap;\"\n                :class=\"{ 'active' : activeIndex === scope.$index }\"\n                @mouseenter=\"activeIndex=scope.$index\"\n                @mouseleave=\"activeIndex=''\"\n                @click=\"toUserInfo(scope.row)\"\n              >{{ scope.row.uin }}\n                <i class=\"el-icon-document-copy\" v-clipboard:copy=\"scope.row.uin\" @click.stop=\"copy(scope.row.uin)\"></i>\n              </p>\n              <p>{{ '(' + scope.row.nickname + ')' }}</p>\n              <p>{{ scope.row.mac }}</p>\n            </div>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"addtime\" label=\"封锁时间\" align=\"center\" width=\"100\">\n          <template slot-scope=\"scope\">\n            <p>{{ scope.row.operator === '10000' ? '系统' : scope.row.operator }}</p>\n            <p>{{ scope.row.addtime }}</p>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"type\" label=\"封锁类型\" align=\"center\">\n          <template slot-scope=\"scope\">\n            <div v-for=\"(item,index) in scope.row.type\" :key=\"index\">\n              {{ item }}\n            </div>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"blackitem\" label=\"封锁主体\" align=\"center\" min-width=\"150\">\n          <template slot-scope=\"scope\">\n            <div v-for=\"(item,index) in scope.row.blackitem\" :key=\"index\" style=\"white-space: nowrap;\">\n              {{ item }}\n            </div>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"hours\" label=\"封锁时长\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"descr\" label=\"封锁原因\" align=\"center\" width=\"206px\">\n          <template slot-scope=\"scope\">\n            <p>{{ scope.row.descr }}</p>\n            <el-image\n              v-for=\"(item,index) in scope.row.images.slice(0, 3)\"\n              :key=\"index\"\n              class=\"img\"\n              :src=\"item\"\n              :preview-src-list=\"srcList\"\n              @click=\"preview(scope.row.images)\"\n            >\n            </el-image>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"unlock_desc\" label=\"解封\" align=\"center\" min-width=\"160\">\n          <template slot-scope=\"scope\">\n            <div v-if=\"scope.row.unlock_user !== '' && scope.row.unlock_user !== null\">解封人:{{ scope.row.unlock_user }}</div>\n            <div>{{ scope.row.unlock_time }}</div>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"unlock_desc\" label=\"解封备注\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"address\" label=\"申诉与操作\" align=\"center\" min-width=\"176px\">\n          <template slot-scope=\"scope\">\n            <div v-if=\"scope.row.is_delete === 0\">\n              <el-button type=\"primary\" size=\"mini\" style=\"margin: 5px;\" @click=\"unblock(scope.row)\">解封</el-button>\n              <el-button v-if=\"scope.row.state === 0\" type=\"danger\" size=\"mini\" style=\"margin: 5px;\" @click=\"reject(scope.row)\">驳回</el-button>\n              <el-button v-else-if=\"scope.row.state === -1\" type=\"danger\" size=\"mini\" style=\"margin: 5px;\" disabled @click=\"reject(scope.row)\">已驳回</el-button>\n              <div v-if=\"scope.row.created !== null && scope.row.created !== ''\">申诉时间 <br /> {{ scope.row.created }}</div>\n            </div>\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <!-- 分页区域 -->\n      <el-pagination\n        :current-page=\"queryInfo.page\"\n        :page-sizes=\"[10, 20, 30, 50, 100]\"\n        :page-size=\"queryInfo.size\"\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=\"totle\"\n        style=\"margin-top: 20px;\"\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n      />\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport { getComplaintList, userUnblock, rejectApply } from '@/api/userManagement'\nimport { mapGetters } from 'vuex'\nimport qs from 'qs'\n\nexport default {\n  inject: ['reload'],\n  data() {\n    return {\n      activeIndex: '',\n      mouseoverFlag: false,\n      srcList: [\n        // 'https://fuss10.elemecdn.com/8/27/f01c15bb73e1ef3793e64e6b7bbccjpeg.jpeg',\n      ],\n      name: 'smk',\n      queryInfo: {\n        blockitem: '',\n        page: 1,\n        size: 30\n      },\n      totle: 0,\n      tableData: [],\n      unblockFrom: {}\n    }\n  },\n  computed: {\n    ...mapGetters([\n      'username'\n    ])\n  },\n  created() {\n    this.getList()\n  },\n  methods: {\n    getList() {\n      getComplaintList(qs.stringify(this.queryInfo)).then(res => {\n        // console.log(res.data.retData)\n        this.tableData = res.data.retData.results\n        this.totle = res.data.retData.total\n        if (!this.tableData) {\n          this.$message.success('该用户或机器码暂无数据')\n        }\n      })\n    },\n    // 解封\n    unblock(row) {\n      this.$confirm('用户:' + row.uin + '(' + row.nickname + ') 封锁原因:' + row.descr, '解封确认', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        // console.log(row)\n        const data = {\n          cate: row.cate.join(','),\n          blackitem: row.blackitem.join(','),\n          unlock_desc: row.unlock_desc,\n          blockeduin: row.uin,\n          password: '23651943',\n          unlock_uin: this.username,\n          block_id: row.block_id\n        }\n        userUnblock(qs.stringify(data)).then(() => {\n          this.$message.success('解封成功')\n          row.is_delete = 1\n          row.unlock_user = this.username\n          row.unlock_time = this.getTime()\n        })\n      }).catch(() => {\n      })\n    },\n    // 申诉申请驳回\n    reject(row) {\n      this.$confirm('你将驳回申诉申请' + row.uin + '(' + row.nickname + ') 封锁原因:' + row.descr, '申诉驳回确认', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        const data = {\n          cate: row.cate.join(','),\n          blackitem: row.blackitem.join(','),\n          unlock_desc: row.unlock_desc,\n          blockeduin: row.uin,\n          password: '23651943',\n          block_id: row.block_id,\n          unlock_uin: this.username\n        }\n        rejectApply(qs.stringify(data)).then(() => {\n          this.$message.success('驳回成功')\n          row.state = -1\n        })\n      }).catch(() => {\n      })\n    },\n    // 大图预览\n    preview(imgUrl) {\n      this.srcList = []\n      this.srcList = imgUrl\n      this.$nextTick(() => {\n        // 获取遮罩层dom\n        const domImageMask = document.querySelector('.el-image-viewer__mask')\n        if (!domImageMask) {\n          return\n        }\n        domImageMask.addEventListener('click', () => {\n          // 点击遮罩层时调用关闭按钮的 click 事件\n          document.querySelector('.el-image-viewer__close').click()\n        })\n      })\n    },\n    // 监听 pagesize 改变的事件\n    handleSizeChange(newSize) {\n      this.queryInfo.size = newSize\n      this.getList()\n    },\n    // 监听 页码值pagenum 改变事件\n    handleCurrentChange(newSize) {\n      this.queryInfo.page = newSize\n      this.getList()\n    },\n    copy(uin) {\n      this.$message.success('复制uin:' + uin + '成功')\n    },\n    toUserInfo(row) {\n      const params = { uin: row.uin }\n      const routeData = this.$router.resolve({\n        name: 'userInfo',\n        query: params\n      })\n      window.open(routeData.href, '_blank')\n    },\n    // 获取当前时间 yyyy-mm-dd hh:mm:ss\n    getTime() {\n      const now = new Date()\n      return now.getFullYear() + '-' + (now.getMonth() + 1).toString().padStart(2, '0') + '-' +\n        now.getDate().toString().padStart(2, '0') + ' ' + now.getHours().toString().padStart(2, '0') + ':' +\n        now.getMinutes().toString().padStart(2, '0') + ':' + now.getSeconds().toString().padStart(2, '0')\n    }\n  }\n}\n</script>\n\n<style>\n.help{\n  font-size: 30px;\n  line-height: 40px;\n  color: #999;\n}\n.img{\n  width: 60px;\n  height: 60px;\n  margin-right: 2px;\n}\n.uinContent{\n  border-radius: 10px;\n  cursor: pointer;\n}\n.active{\n  text-decoration: underline;\n  color: rgba(255,0,0,.8);\n  cursor: pointer;\n}\n</style>\n\n"]}]}