{"remainingRequest":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\node_modules\\_vue-loader@15.9.8@vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\src\\views\\award\\deblocking.vue?vue&type=style&index=0&id=7f159ac2&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\src\\views\\award\\deblocking.vue","mtime":1637930052000},{"path":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\node_modules\\_css-loader@3.6.0@css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\node_modules\\_vue-loader@15.9.8@vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\node_modules\\_postcss-loader@3.0.0@postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\node_modules\\_vue-loader@15.9.8@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5zZWFjaElucHV0IHsKICB3aWR0aDogNDAwcHg7CiAgbWFyZ2luOiAwIDIwcHggMTBweCAwOwp9CgouYWRkSXRlbSB7CiAgd2lkdGg6IDQwMHB4Owp9Cgouc2VhcmNoYnRuIHsKICBtYXJnaW4tbGVmdDogMTBweDsKfQoKLnRhYmxlQnRuIHsKICBtYXJnaW46IDNweDsKfQo="},{"version":3,"sources":["deblocking.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4KA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA","file":"deblocking.vue","sourceRoot":"src/views/award","sourcesContent":["<template>\n  <div>\n    <!-- 举报 -->\n    <el-card style=\"margin: 10px;\">\n      <div>\n        <template>\n          <el-row :gutter=\"20\" style=\"margin-bottom: 20px;\">\n            <el-col style=\"width:450px;\">\n              <el-radio-group v-model=\"search.state\" @change=\"applyDeblockingList()\">\n                <el-radio-button label=\"\">全部</el-radio-button>\n                <el-radio-button label=\"0\">待处理</el-radio-button>\n                <el-radio-button label=\"-1\">未通过</el-radio-button>\n              </el-radio-group>\n            </el-col>\n          </el-row>\n        </template>\n      </div>\n      <el-table :data=\"reportList\" stripe style=\"width: 100%\">\n        <el-table-column type=\"index\" label=\"#\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"state\" label=\"状态\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"blockeduin\" label=\"被封锁人id\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"blockednick\" label=\"被封锁人昵称\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"blockitem\" label=\"被封锁项\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"descr\" label=\"被封锁原因\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"images\" label=\"图片\" align=\"center\">\n          <template scope=\"scope\">\n            <div v-for=\"(item,index) in reportList[scope.$index].images\" :key=\"index\">\n              <el-image :src=\"item\" style=\"width:100px;height:100px;\"\n                        :preview-src-list=\"srcList\"\n                        @click=\"addPreview(item)\"\n              ></el-image>\n            </div>\n            <!-- <el-image :src=\"imgurl\"\n                :preview-src-list=\"srcList\"\n                @click=\"addPreview(imgurl)\">\n            </el-image> -->\n          </template>\n        </el-table-column>\n        <el-table-column label=\"操作\" align=\"center\">\n          <template scope=\"scope\">\n            <el-button\n              class=\"tableBtn\"\n              type=\"primary\"\n              size=\"small\"\n              @click=\"deblocking(scope.row)\"\n            >解封\n            </el-button>\n            <el-button\n              class=\"tableBtn\"\n              type=\"danger\"\n              size=\"small\"\n              @click=\"unblockDeblocking(scope.row)\"\n            >不解封\n            </el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <el-pagination\n        :current-page=\"search.page\"\n        :page-sizes=\"[10, 20, 30]\"\n        :page-size=\"search.size\"\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=\"totle\"\n        style=\"margin-top: 20px;\"\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n      />\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport { getDeblockingList, doneDeblocking, unblock } from '@/api/award'\nimport qs from 'qs'\n\nexport default {\n  inject: ['reload'],\n  data() {\n    return {\n      // imgurl:'https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg',\n      srcList: [],\n      searchState: '',\n      select: '',\n      reportList: [],\n      search: {\n        state: '',\n        page: 1,\n        size: 10\n      },\n      totle: 0\n    }\n  },\n  created() {\n    this.search.state = this.$store.state.cache.deblocking\n    this.applyDeblockingList()\n  },\n  methods: {\n    // 大图预览\n    addPreview(imgurl) {\n      this.srcList = []\n      this.srcList.push(imgurl)\n      this.$nextTick(() => {\n        // 获取遮罩层dom\n        let domImageMask = document.querySelector('.el-image-viewer__mask')\n        if (!domImageMask) {\n          return\n        }\n        domImageMask.addEventListener('click', () => {\n          // 点击遮罩层时调用关闭按钮的 click 事件\n          document.querySelector('.el-image-viewer__close').click()\n        })\n      })\n    },\n    applyDeblockingList() {\n      getDeblockingList(qs.stringify(this.search)).then(res => {\n        // console.log(res.data.retData)\n        this.reportList = res.data.retData.results\n        this.totle = res.data.retData.total\n        this.reportList.forEach(item => {\n          item.state = item.state == -1 ? '未通过' : '待处理'\n          if (typeof (item.images) == 'string' && item.images.indexOf(',') == -1) {\n            item.images = [item.images]\n          }\n          if (item.images !== undefined && item.images.indexOf(',') !== -1) {\n            item.images = this.reportList.images.split(',')\n          }\n        })\n      })\n    },\n    deblocking(row) {\n      this.$store.commit('deblocking', this.search.state)\n      const data = {\n        blockitem: row.blockitem,\n        reason: row.descr\n      }\n      doneDeblocking(qs.stringify(data)).then(res => {\n        if (res.data.retData == 0) {\n          this.$message.info('更改失败!')\n        } else if (res.data.retData == null) {\n          this.$message.success('更改成功!')\n        }\n        this.reload()\n      })\n    },\n    unblockDeblocking(row) {\n      this.$store.commit('deblocking', this.search.state)\n      const data = {\n        pid: 1,\n        password: '23651943',\n        uin: row.blockeduin\n      }\n      unblock(qs.stringify(data)).then(res => {\n        this.reload()\n      })\n    },\n\n    // 监听 pagesize 改变的事件\n    handleSizeChange(newSize) {\n      this.search.size = newSize\n      this.applyDeblockingList()\n    },\n    // 监听 页码值pagenum 改变事件\n    handleCurrentChange(newSize) {\n      this.search.page = newSize\n      this.applyDeblockingList()\n    }\n  }\n}\n</script>\n\n<style scoped>\n.seachInput {\n  width: 400px;\n  margin: 0 20px 10px 0;\n}\n\n.addItem {\n  width: 400px;\n}\n\n.searchbtn {\n  margin-left: 10px;\n}\n\n.tableBtn {\n  margin: 3px;\n}\n</style>\n"]}]}