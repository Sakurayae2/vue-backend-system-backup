{"remainingRequest":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\node_modules\\_vue-loader@15.9.8@vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\src\\views\\award\\punish.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\src\\views\\award\\punish.vue","mtime":1637930052000},{"path":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\node_modules\\_babel-loader@8.2.3@babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\node_modules\\_vue-loader@15.9.8@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldFB1bmlzaCwgYWRkUHVuaXNoLCByZW1vdmVQdW5pc2ggfSBmcm9tICdAL2FwaS9hd2FyZCcKaW1wb3J0IHFzIGZyb20gJ3FzJwoKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICAvLyDoh6rlrprkuYnop4TliJkKICAgIHZhciBjaGVja1VpbnMgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7CiAgICAgIGNvbnN0IHJlZ0VtYWlsID0gL14oXGQqKSgsXGQqKSokLwogICAgICBpZiAocmVnRW1haWwudGVzdCh2YWx1ZSkpIHsKICAgICAgICAvLyDlkIjms5UKICAgICAgICByZXR1cm4gY2FsbGJhY2soKQogICAgICB9CiAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign6K+36L6T5YWl5q2j56Gu5qC85byP77yM5aaCOjEyMyw0NTYnKSkKICAgIH0KICAgIHJldHVybiB7CiAgICAgIHJvb21UeXBlTmFtZTogewogICAgICAgIHNpbmc6ICfllLHmrYzmiL/pl7QnLAogICAgICAgIGRhbmNlOiAn5bm/5Zy66Iie5oi/6Ze0JywKICAgICAgICBjaGVzczogJ+ixoeaji+aIv+mXtCcKICAgICAgfSwKICAgICAgcmVhc29uQWR2aWNlOiBbXSwKICAgICAgYWRkUHVuaXNoRmFsZzogZmFsc2UsCiAgICAgIHJvb21UeXBlOiAnc2luZycsCiAgICAgIGFkZFB1bmlzaEZvcm06IHsKICAgICAgICB0eXBlOiAnc2luZycsCiAgICAgICAgLy8gZGF0ZTogJycsCiAgICAgICAgdWluOiAnJywKICAgICAgICByZWFzb246ICcnLAogICAgICAgIHJlc3VsdDogJycsCiAgICAgICAgcGFzc3dkOiAndGFvbGVzb2Z0MDU3MScKICAgICAgfSwKICAgICAgLy8g5p+l6K+iCiAgICAgIHF1ZXJ5SW5mbzogewogICAgICAgIHVpbjogJycsCiAgICAgICAgcGFzc3dkOiAndGFvbGVzb2Z0MDU3MScKICAgICAgfSwKICAgICAgc2hvdzogewogICAgICAgIHBhZ2U6IDEsCiAgICAgICAgc2l6ZTogMjAsCiAgICAgICAgdG90bGU6IDAKICAgICAgfSwKICAgICAgcHVuaXNoTGlzdENhY2hlOiBbXSwKICAgICAgcHVuaXNoTGlzdDogW10sCiAgICAgIGFkZFB1bmlzaEZvcm1SdWxlczogewogICAgICAgIHVpbjogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpXVpbicsIHRyaWdnZXI6ICdibHVyJyB9LAogICAgICAgICAgeyB2YWxpZGF0b3I6IGNoZWNrVWlucywgdHJpZ2dlcjogJ2JsdXInIH0KICAgICAgICBdLAogICAgICAgIHJlYXNvbjogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeWkhOe9muWOn+WboCcsIHRyaWdnZXI6ICdjaGFuZ2UnIH0KICAgICAgICBdLAogICAgICAgIHJlc3VsdDogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeWkhOe9micsIHRyaWdnZXI6ICdjaGFuZ2UnIH0KICAgICAgICBdCiAgICAgIH0KICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldExpc3QoKQogIH0sCiAgYmVmb3JlRGVzdHJveSgpIHsKICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdyZWFzb25BZHZpY2UnKQogIH0sCiAgbWV0aG9kczogewogICAgcm9vbVN3aXRjaCgpIHsKICAgICAgY29uc29sZS5sb2codGhpcy5hZGRQdW5pc2hGb3JtLnR5cGUsIHRoaXMucm9vbVR5cGUpCiAgICB9LAogICAgLy8g5aSE572a5Y6f5Zug5ZKM5aSE572a5bu66K6uCiAgICBxdWVyeVNlYXJjaChxdWVyeVN0cmluZywgY2IpIHsKICAgICAgdmFyIHJlYXNvbkFkdmljZSA9IHRoaXMucmVhc29uQWR2aWNlCiAgICAgIHZhciByZXN1bHRzID0gcXVlcnlTdHJpbmcgPyByZWFzb25BZHZpY2UuZmlsdGVyKHRoaXMuY3JlYXRlRmlsdGVyKHF1ZXJ5U3RyaW5nKSkgOiByZWFzb25BZHZpY2UKICAgICAgLy8g6LCD55SoIGNhbGxiYWNrIOi/lOWbnuW7uuiuruWIl+ihqOeahOaVsOaNrgogICAgICBjYihyZXN1bHRzKQogICAgfSwKICAgIGNyZWF0ZUZpbHRlcihxdWVyeVN0cmluZykgewogICAgICByZXR1cm4gKHJlc3RhdXJhbnQpID0+IHsKICAgICAgICByZXR1cm4gKHJlc3RhdXJhbnQudmFsdWUudG9Mb3dlckNhc2UoKS5pbmRleE9mKHF1ZXJ5U3RyaW5nLnRvTG93ZXJDYXNlKCkpID09PSAwKQogICAgICB9CiAgICB9LAogICAgbG9hZEFsbCgpIHsKICAgICAgdGhpcy5hZGRQdW5pc2hGYWxnID0gdHJ1ZQogICAgICBpZiAoSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncmVhc29uQWR2aWNlJykgIT09IG51bGwpKSB7CiAgICAgICAgdGhpcy5yZWFzb25BZHZpY2UgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdyZWFzb25BZHZpY2UnKSkKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnJlYXNvbkFkdmljZSA9IFsKICAgICAgICAgIHsgdmFsdWU6ICflgYfllLEnIH0KICAgICAgICBdCiAgICAgIH0KICAgIH0sCiAgICAvLyDojrflj5blpITnvZrliJfooagKICAgIGdldExpc3QoKSB7CiAgICAgIHRoaXMucXVlcnlJbmZvLnR5cGUgPSB0aGlzLnJvb21UeXBlCiAgICAgIGdldFB1bmlzaCh0aGlzLnF1ZXJ5SW5mbykudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMucHVuaXNoTGlzdENhY2hlID0gcmVzLmRhdGEucmV0RGF0YS5kYXRhTGlzdAogICAgICAgIHRoaXMucHVuaXNoTGlzdCA9IHRoaXMucHVuaXNoTGlzdENhY2hlLnNsaWNlKCh0aGlzLnNob3cucGFnZSAtIDEpICoKICAgICAgICAgIHRoaXMuc2hvdy5zaXplLCB0aGlzLnNob3cucGFnZSAqIHRoaXMuc2hvdy5zaXplKQogICAgICAgIHRoaXMuc2hvdy50b3RsZSA9IHRoaXMucHVuaXNoTGlzdENhY2hlLmxlbmd0aAogICAgICB9KQogICAgfSwKICAgIC8vIOa3u+WKoOWkhOe9mgogICAgYWRkUHVuaXNobWVudCgpIHsKICAgICAgdGhpcy4kcmVmcy5hZGRQdW5pc2hGb3JtLnZhbGlkYXRlKHZhbGlkID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIGFkZFB1bmlzaChxcy5zdHJpbmdpZnkodGhpcy5hZGRQdW5pc2hGb3JtKSkudGhlbihyZXMgPT4gewogICAgICAgICAgICAvLyAgIGNvbnNvbGUubG9nKHJlcykKICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnJldERhdGEuc3RhdHVzQ29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgdGhpcy5yZWFzb25BZHZpY2UucHVzaCh7IHZhbHVlOiB0aGlzLmFkZFB1bmlzaEZvcm0ucmVhc29uIH0pCiAgICAgICAgICAgICAgdGhpcy5yZWFzb25BZHZpY2UucHVzaCh7IHZhbHVlOiB0aGlzLmFkZFB1bmlzaEZvcm0ucmVzdWx0IH0pCiAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3JlYXNvbkFkdmljZScsIEpTT04uc3RyaW5naWZ5KHRoaXMucmVhc29uQWR2aWNlKSkKICAgICAgICAgICAgICB0aGlzLnJlYXNvbkFkdmljZSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3JlYXNvbkFkdmljZScpKQogICAgICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpCiAgICAgICAgICAgICAgdGhpcy5yZXNldEZvcm0oJ2FkZFB1bmlzaEZvcm0nKQogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5re75Yqg5aSE572a5oiQ5YqfJykKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5kYXRhLnJldERhdGEubXNnKQogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgfSkKICAgIH0sCiAgICAvLyDnp7vpmaTlpITnvZoKICAgIGRlbGV0ZVJvdyhyb3csIGluZGV4KSB7CiAgICAgIHRoaXMuJGNvbmZpcm0oJ+atpOaTjeS9nOWwhuawuOS5heWIoOmZpOivpeaWh+S7tiwg5piv5ZCm57un57utPycsICfmj5DnpLonLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICBjb25zdCBkYXRhID0gewogICAgICAgICAgcGFzc3dkOiAndGFvbGVzb2Z0MDU3MScsCiAgICAgICAgICB1aW46IHJvdy51aW4sCiAgICAgICAgICBkYXRlOiByb3cuZGF0ZQogICAgICAgIH0KICAgICAgICByZW1vdmVQdW5pc2gocXMuc3RyaW5naWZ5KGRhdGEpKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICBpZiAocmVzLmRhdGEucmV0RGF0YS5zdGF0dXNDb2RlID09PSAyMDApIHsKICAgICAgICAgICAgdGhpcy5wdW5pc2hMaXN0LnNwbGljZShpbmRleCwgMSkKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfnp7vpmaTlpITnvZrmiJDlip8nKQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign56e76Zmk5aSE572a5aSx6LSlJykKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5pbmZvKCflt7Llj5bmtojliKDpmaQnKQogICAgICB9KQogICAgfSwKICAgIC8vIOmHjee9rgogICAgcmVzZXRGb3JtKGZvcm1OYW1lKSB7CiAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnJlc2V0RmllbGRzKCkKICAgIH0sCiAgICAvLyDnm5HlkKwgcGFnZXNpemUg5pS55Y+Y55qE5LqL5Lu2CiAgICBhc3luYyBoYW5kbGVTaXplQ2hhbmdlKG5ld1NpemUpIHsKICAgICAgdGhpcy5zaG93LnNpemUgPSBuZXdTaXplCiAgICAgIHRoaXMucHVuaXNoTGlzdCA9IHRoaXMucHVuaXNoTGlzdENhY2hlLnNsaWNlKCh0aGlzLnNob3cucGFnZSAtIDEpICoKICAgICAgICB0aGlzLnNob3cuc2l6ZSwgdGhpcy5zaG93LnBhZ2UgKiB0aGlzLnNob3cuc2l6ZSkKICAgIH0sCiAgICAvLyDnm5HlkKwg6aG156CB5YC8cGFnZW51bSDmlLnlj5jkuovku7YKICAgIGFzeW5jIGhhbmRsZUN1cnJlbnRDaGFuZ2UobmV3U2l6ZSkgewogICAgICB0aGlzLnNob3cucGFnZSA9IG5ld1NpemUKICAgICAgdGhpcy5wdW5pc2hMaXN0ID0gdGhpcy5wdW5pc2hMaXN0Q2FjaGUuc2xpY2UoKHRoaXMuc2hvdy5wYWdlIC0gMSkgKgogICAgICAgIHRoaXMuc2hvdy5zaXplLCB0aGlzLnNob3cucGFnZSAqIHRoaXMuc2hvdy5zaXplKQogICAgfQogIH0KfQo="},{"version":3,"sources":["punish.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"punish.vue","sourceRoot":"src/views/award","sourcesContent":["<template>\n  <div>\n    <!-- 卡片视图 -->\n    <el-card style=\"margin: 10px;\">\n      <el-input\n        v-model=\"queryInfo.uin\"\n        class=\"seachInput\"\n        placeholder=\"请输入uin\"\n        clearable\n        @keyup.enter.native=\"getList()\"\n      >\n        <el-button slot=\"append\" icon=\"el-icon-search\" @click.native=\"getList()\"/>\n      </el-input>\n      <el-radio-group v-model=\"roomType\" class=\"roomType\" @change=\"getList()\">\n        <el-radio-button label=\"sing\">唱歌房间</el-radio-button>\n        <el-radio-button label=\"dance\">广场舞房间</el-radio-button>\n        <el-radio-button label=\"chess\">象棋房间</el-radio-button>\n      </el-radio-group>\n      <transition name=\"fade\" mode=\"out-in\">\n        <el-form\n          v-if=\"addPunishFalg\"\n          ref=\"addPunishForm\"\n          style=\"width:500px;margin: 0;\"\n          :rules=\"addPunishFormRules\"\n          :model=\"addPunishForm\"\n          label-width=\"100px\"\n        >\n          <el-form-item label=\"房间类型\" prop=\"type\">\n            <el-select v-model=\"addPunishForm.type\" placeholder=\"请选择房间类型\">\n              <el-option label=\"唱歌房间\" value=\"sing\"></el-option>\n              <el-option label=\"广场舞房间\" value=\"dance\"></el-option>\n              <el-option label=\"象棋房间\" value=\"chess\"></el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item class=\"addItem\" label=\"处罚uin\" prop=\"uin\">\n            <el-input\n              v-model=\"addPunishForm.uin\"\n              placeholder=\"请输入uin,如:123或123,456,仅广场舞房间可输入房间号\"\n              @keyup.enter.native=\"addPunishment\"\n            ></el-input>\n          </el-form-item>\n          <el-form-item class=\"addItem\" label=\"处罚原因\" prop=\"reason\">\n            <el-autocomplete\n              v-model=\"addPunishForm.reason\"\n              :fetch-suggestions=\"querySearch\"\n              style=\"width:100%\"\n              placeholder=\"请输入处罚原因\"\n              @keyup.enter.native=\"addPunishment\"\n            ></el-autocomplete>\n          </el-form-item>\n          <el-form-item class=\"addItem\" label=\"处罚\" prop=\"result\">\n            <el-autocomplete\n              v-model=\"addPunishForm.result\"\n              :fetch-suggestions=\"querySearch\"\n              style=\"width:100%\"\n              placeholder=\"请输入处罚\"\n              @keyup.enter.native=\"addPunishment\"\n            ></el-autocomplete>\n          </el-form-item>\n          <el-form-item>\n            <el-button type=\"primary\" @click=\"addPunishment\">添加处罚</el-button>\n            <el-button @click=\"addPunishFalg=false\">取消</el-button>\n            <el-button @click=\"resetForm('addPunishForm')\">重置</el-button>\n          </el-form-item>\n        </el-form>\n\n        <el-button v-else type=\"primary\" @click=\"loadAll\">添加处罚</el-button>\n      </transition>\n\n      <!-- 表格 -->\n      <el-table :data=\"punishList\" stripe style=\"width: 100%\">\n        <el-table-column label=\"房间类型\" align=\"center\">\n          {{ roomTypeName[roomType] }}\n        </el-table-column>\n        <el-table-column prop=\"date\" label=\"日期\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"uin\" label=\"uin/roomid\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"nick\" label=\"昵称\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"reason\" label=\"处罚原因\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"result\" label=\"惩罚\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"handle\" label=\"操作\" align=\"center\">\n          <template slot-scope=\"scope\">\n            <el-button type=\"text\" @click.native.prevent=\"deleteRow(scope.row,scope.$index)\">移除</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <!-- 分页区域 -->\n      <el-pagination\n        :current-page=\"show.page\"\n        :page-sizes=\"[20, 30, 50]\"\n        :page-size=\"show.size\"\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=\"show.totle\"\n        style=\"margin-top: 20px;\"\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n      />\n\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport { getPunish, addPunish, removePunish } from '@/api/award'\nimport qs from 'qs'\n\nexport default {\n  data() {\n    // 自定义规则\n    var checkUins = (rule, value, callback) => {\n      const regEmail = /^(\\d*)(,\\d*)*$/\n      if (regEmail.test(value)) {\n        // 合法\n        return callback()\n      }\n      callback(new Error('请输入正确格式，如:123,456'))\n    }\n    return {\n      roomTypeName: {\n        sing: '唱歌房间',\n        dance: '广场舞房间',\n        chess: '象棋房间'\n      },\n      reasonAdvice: [],\n      addPunishFalg: false,\n      roomType: 'sing',\n      addPunishForm: {\n        type: 'sing',\n        // date: '',\n        uin: '',\n        reason: '',\n        result: '',\n        passwd: 'taolesoft0571'\n      },\n      // 查询\n      queryInfo: {\n        uin: '',\n        passwd: 'taolesoft0571'\n      },\n      show: {\n        page: 1,\n        size: 20,\n        totle: 0\n      },\n      punishListCache: [],\n      punishList: [],\n      addPunishFormRules: {\n        uin: [\n          { required: true, message: '请输入uin', trigger: 'blur' },\n          { validator: checkUins, trigger: 'blur' }\n        ],\n        reason: [\n          { required: true, message: '请输入处罚原因', trigger: 'change' }\n        ],\n        result: [\n          { required: true, message: '请输入处罚', trigger: 'change' }\n        ]\n      }\n    }\n  },\n  created() {\n    this.getList()\n  },\n  beforeDestroy() {\n    localStorage.removeItem('reasonAdvice')\n  },\n  methods: {\n    roomSwitch() {\n      console.log(this.addPunishForm.type, this.roomType)\n    },\n    // 处罚原因和处罚建议\n    querySearch(queryString, cb) {\n      var reasonAdvice = this.reasonAdvice\n      var results = queryString ? reasonAdvice.filter(this.createFilter(queryString)) : reasonAdvice\n      // 调用 callback 返回建议列表的数据\n      cb(results)\n    },\n    createFilter(queryString) {\n      return (restaurant) => {\n        return (restaurant.value.toLowerCase().indexOf(queryString.toLowerCase()) === 0)\n      }\n    },\n    loadAll() {\n      this.addPunishFalg = true\n      if (JSON.parse(localStorage.getItem('reasonAdvice') !== null)) {\n        this.reasonAdvice = JSON.parse(localStorage.getItem('reasonAdvice'))\n      } else {\n        this.reasonAdvice = [\n          { value: '假唱' }\n        ]\n      }\n    },\n    // 获取处罚列表\n    getList() {\n      this.queryInfo.type = this.roomType\n      getPunish(this.queryInfo).then(res => {\n        this.punishListCache = res.data.retData.dataList\n        this.punishList = this.punishListCache.slice((this.show.page - 1) *\n          this.show.size, this.show.page * this.show.size)\n        this.show.totle = this.punishListCache.length\n      })\n    },\n    // 添加处罚\n    addPunishment() {\n      this.$refs.addPunishForm.validate(valid => {\n        if (valid) {\n          addPunish(qs.stringify(this.addPunishForm)).then(res => {\n            //   console.log(res)\n            if (res.data.retData.statusCode === 200) {\n              this.reasonAdvice.push({ value: this.addPunishForm.reason })\n              this.reasonAdvice.push({ value: this.addPunishForm.result })\n              localStorage.setItem('reasonAdvice', JSON.stringify(this.reasonAdvice))\n              this.reasonAdvice = JSON.parse(localStorage.getItem('reasonAdvice'))\n              this.getList()\n              this.resetForm('addPunishForm')\n              this.$message.success('添加处罚成功')\n            } else {\n              this.$message.error(res.data.retData.msg)\n            }\n          })\n        }\n      })\n    },\n    // 移除处罚\n    deleteRow(row, index) {\n      this.$confirm('此操作将永久删除该文件, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        const data = {\n          passwd: 'taolesoft0571',\n          uin: row.uin,\n          date: row.date\n        }\n        removePunish(qs.stringify(data)).then(res => {\n          if (res.data.retData.statusCode === 200) {\n            this.punishList.splice(index, 1)\n            this.$message.success('移除处罚成功')\n          } else {\n            this.$message.error('移除处罚失败')\n          }\n        })\n      }).catch(() => {\n        this.$message.info('已取消删除')\n      })\n    },\n    // 重置\n    resetForm(formName) {\n      this.$refs[formName].resetFields()\n    },\n    // 监听 pagesize 改变的事件\n    async handleSizeChange(newSize) {\n      this.show.size = newSize\n      this.punishList = this.punishListCache.slice((this.show.page - 1) *\n        this.show.size, this.show.page * this.show.size)\n    },\n    // 监听 页码值pagenum 改变事件\n    async handleCurrentChange(newSize) {\n      this.show.page = newSize\n      this.punishList = this.punishListCache.slice((this.show.page - 1) *\n        this.show.size, this.show.page * this.show.size)\n    }\n  }\n}\n</script>\n\n<style scoped>\n.seachInput {\n  width: 400px;\n  margin: 0 20px 10px 0;\n}\n\n.addItem {\n  width: 500px;\n}\n.roomType {\n  margin-right: 20px;\n}\n</style>\n"]}]}