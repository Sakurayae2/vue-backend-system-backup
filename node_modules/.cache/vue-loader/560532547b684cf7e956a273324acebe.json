{"remainingRequest":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\node_modules\\_vue-loader@15.9.8@vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\src\\views\\permission\\menu.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\src\\views\\permission\\menu.vue","mtime":1637930052000},{"path":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\node_modules\\_babel-loader@8.2.3@babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\node_modules\\_vue-loader@15.9.8@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldG1lbnUsIGRlbGV0ZW1lbnUsIGVkaXRtZW51LCBhZGRtZW51IH0gZnJvbSAnQC9hcGkvcGVybWlzc2lvbicKCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgLy8g6I+c5Y2V5YiX6KGoCiAgICAgIG1lbnU6IFtdLAogICAgICBkZWZhdWx0UHJvcHM6IHsKICAgICAgICBjaGlsZHJlbjogJ2NoaWxkJywKICAgICAgICBsYWJlbDogJ25hbWUnCiAgICAgIH0sCiAgICAgIG1lbnVJZDogMTAwLAogICAgICAvLyAgIOa3u+WKoOinkuiJsuWvueivneahhgogICAgICBBZGRNZW51RGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIC8vICAg5omL5Yqo5re75Yqg5a+56K+d5qGGCiAgICAgIGhhbmRsZUFkZE1lbnVEaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgLy8g5re75Yqg6KeS6Imy6KGo5Y2VCiAgICAgIGFkZE1lbnVGb3JtOiB7fSwKICAgICAgLy8gICDmt7vliqDop5LoibLooajljZXpqozor4EKICAgICAgYWRkTWVudUZvcm1SdWxlczogewogICAgICAgIG5hbWU6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXoj5zljZXlkI3np7AnLCB0cmlnZ2VyOiAnYmx1cicgfSwKICAgICAgICAgIHsgbWluOiAyLCBtYXg6IDEwLCBtZXNzYWdlOiAn6I+c5Y2V5ZCN56ew55qE6ZW/5bqm5ZyoMu+9njEw5Liq5a2XJywgdHJpZ2dlcjogJ2JsdXInIH0KICAgICAgICBdLAogICAgICAgIHBhdGg6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXot6/lvoQnLCB0cmlnZ2VyOiAnYmx1cicgfQogICAgICAgIF0sCiAgICAgICAgbGV2ZWw6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXoj5zljZXnuqfliKsnLCB0cmlnZ2VyOiAnYmx1cicgfQogICAgICAgIF0sCiAgICAgICAgcGFyZW50OiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl54i26I+c5Y2VaWQnLCB0cmlnZ2VyOiAnYmx1cicgfQogICAgICAgIF0KICAgICAgfSwKICAgICAgLy8gICDkv67mlLnop5LoibLlr7nor53moYYKICAgICAgZWRpdE1lbnVEaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgLy8g5L+u5pS56KeS6Imy6KGo5Y2VCiAgICAgIGVkaXRNZW51Rm9ybToge30sCiAgICAgIGN1cnJlbnRFZGl0SWQ6ICcnLAogICAgICAvLyAgIOa3u+WKoOinkuiJsuihqOWNlemqjOivgQogICAgICBlZGl0TWVudUZvcm1SdWxlczogewogICAgICAgIG5hbWU6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXoj5zljZXlkI3np7AnLCB0cmlnZ2VyOiAnYmx1cicgfSwKICAgICAgICAgIHsgbWluOiAyLCBtYXg6IDEwLCBtZXNzYWdlOiAn6I+c5Y2V5ZCN56ew55qE6ZW/5bqm5ZyoMu+9njEw5Liq5a2XJywgdHJpZ2dlcjogJ2JsdXInIH0KICAgICAgICBdLAogICAgICAgIHBhdGg6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXot6/lvoQnLCB0cmlnZ2VyOiAnYmx1cicgfSwKICAgICAgICBdCiAgICAgIH0KICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldE1lbnUoKQogIH0sCiAgbWV0aG9kczogewogICAgZ2V0TWVudSgpIHsKICAgICAgY29uc3QgZGF0YSA9IHsgZHJvcDogdHJ1ZSwgdHJlZTogdHJ1ZSwgbGV2ZWw6IDEgfQogICAgICBnZXRtZW51KGRhdGEpLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLm1lbnUgPSByZXMuZGF0YQogICAgICB9KQogICAgfSwKICAgIC8vIOaYvuekuua3u+WKoOiPnOWNlQogICAgc2hvd0FkZERpYWxvZyhkYXRhKSB7CiAgICAgIHRoaXMuJHNldCh0aGlzLmFkZE1lbnVGb3JtLCAncGFyZW50JywgZGF0YS5pZCkKICAgICAgdGhpcy4kc2V0KHRoaXMuYWRkTWVudUZvcm0sICdsZXZlbCcsIChkYXRhLmxldmVsICsgMSkpCiAgICAgIHRoaXMuQWRkTWVudURpYWxvZ1Zpc2libGUgPSB0cnVlCiAgICB9LAogICAgc2hvd0hhbmRsZUFkZERpYWxvZygpIHsKICAgICAgdGhpcy5oYW5kbGVBZGRNZW51RGlhbG9nVmlzaWJsZSA9IHRydWUKICAgIH0sCiAgICAvLyDmt7vliqDoj5zljZUKICAgIGFkZE1lbnVzKCkgewogICAgICBjb25zb2xlLmxvZyh0aGlzLmFkZE1lbnVGb3JtKQogICAgICBhZGRtZW51KHRoaXMuYWRkTWVudUZvcm0pLnRoZW4oKCkgPT4gewogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5re75Yqg6I+c5Y2V5oiQ5Yqf77yBJykKICAgICAgICB0aGlzLmFkZE1lbnVGb3JtID0ge30KICAgICAgICB0aGlzLmdldE1lbnUoKQogICAgICB9KQogICAgICB0aGlzLmhhbmRsZUFkZE1lbnVEaWFsb2dWaXNpYmxlID0gZmFsc2UKICAgICAgdGhpcy5BZGRNZW51RGlhbG9nVmlzaWJsZSA9IGZhbHNlCiAgICB9LAoKICAgIC8vIOWIoOmZpOiPnOWNleiKgueCuQogICAgcmVtb3ZlKG5vZGUsIGRhdGEpIHsKICAgICAgY29uc3QgcGFyZW50ID0gbm9kZS5wYXJlbnQKICAgICAgY29uc3QgY2hpbGRyZW4gPSBwYXJlbnQuZGF0YS5jaGlsZCB8fCBwYXJlbnQuZGF0YQogICAgICBjb25zdCBpbmRleCA9IGNoaWxkcmVuLmZpbmRJbmRleChkID0+IGQuaWQgPT09IGRhdGEuaWQpCiAgICAgIHRoaXMuJGNvbmZpcm0oJ+atpOaTjeS9nOWwhuawuOS5heWIoOmZpOivpeaWh+S7tiwg5piv5ZCm57un57utPycsICfmj5DnpLonLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICBjaGlsZHJlbi5zcGxpY2UoaW5kZXgsIDEpCiAgICAgICAgLy8g5o6l5Y+j5ZCO5Y+w5Yig6ZmkCiAgICAgICAgZGVsZXRlbWVudShkYXRhLmlkKS50aGVuKCgpID0+IHsKICAgICAgICB9KQoKICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+WIoOmZpOaIkOWKn++8gScpCiAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmluZm8oJ+W3suWPlua2iOWIoOmZpO+8gScpCiAgICAgIH0pCiAgICB9LAogICAgLy8g57yW6L6R6I+c5Y2VCiAgICBzaG93RWRpdERpYWxvZyhkYXRhKSB7CiAgICAgIGNvbnNvbGUubG9nKGRhdGEpCiAgICAgIHRoaXMuY3VycmVudEVkaXRJZCA9IGRhdGEuaWQKICAgICAgdGhpcy5lZGl0TWVudURpYWxvZ1Zpc2libGUgPSB0cnVlCiAgICB9LAogICAgZWRpdE1lbnVzKCkgewogICAgICBlZGl0bWVudSh0aGlzLmN1cnJlbnRFZGl0SWQsIHRoaXMuZWRpdE1lbnVGb3JtKS50aGVuKCgpID0+IHsKICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+e8lui+keiPnOWNleaIkOWKn++8gScpCiAgICAgICAgdGhpcy5lZGl0TWVudUZvcm0gPSB7fQogICAgICAgIHRoaXMuZ2V0TWVudSgpCiAgICAgIH0pCiAgICAgIHRoaXMuZWRpdE1lbnVEaWFsb2dWaXNpYmxlID0gZmFsc2UKICAgIH0KICB9Cn0K"},{"version":3,"sources":["menu.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6HA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"menu.vue","sourceRoot":"src/views/permission","sourcesContent":["<template>\n  <div>\n    <!-- 卡片视图 -->\n    <el-card>\n      <!-- 添加角色按钮 -->\n      <el-row :gutter=\"20\" style=\"margin-bottom: 30px;\">\n        <el-col :span=\"4\">\n          <el-button type=\"primary\" @click=\"showHandleAddDialog\">手动添加根菜单</el-button>\n        </el-col>\n      </el-row>\n      <div class=\"custom-tree-container\">\n        <div class=\"block\">\n          <p>权限菜单</p>\n          <el-tree\n            :data=\"menu\"\n            node-key=\"id\"\n            default-expand-all\n            :props=\"defaultProps\"\n            :expand-on-click-node=\"false\"\n          >\n            <span slot-scope=\"{ node, data }\" class=\"custom-tree-node\">\n              <span>{{ node.label }}</span>\n              <span>\n                <el-button\n                  v-if=\"data.id !== 1\"\n                  type=\"text\"\n                  size=\"mini\"\n                  @click=\"() => remove(node, data)\"\n                >\n                  删除\n                </el-button>\n                <el-button\n                  v-if=\"data.id !== 1\"\n                  type=\"text\"\n                  size=\"mini\"\n                  @click=\"showEditDialog(data)\"\n                >\n                  修改\n                </el-button>\n                <el-button\n                  type=\"text\"\n                  size=\"mini\"\n                  @click=\"showAddDialog(data)\"\n                >\n                  添加\n                </el-button>\n              </span>\n            </span>\n          </el-tree>\n        </div>\n      </div>\n    </el-card>\n\n    <!-- 添加菜单对话框 -->\n    <el-dialog title=\"添加菜单\" :visible.sync=\"AddMenuDialogVisible\" width=\"40%\">\n      <el-form\n        ref=\"addMenuFormRef\"\n        :model=\"addMenuForm\"\n        :rules=\"addMenuFormRules\"\n        label-width=\"110px\"\n      >\n        <el-form-item label=\"菜单名称\" prop=\"name\">\n          <el-input v-model=\"addMenuForm.name\" />\n        </el-form-item>\n        <el-form-item label=\"路径\" prop=\"path\">\n          <el-input v-model=\"addMenuForm.path\" />\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"AddMenuDialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"addMenus\">确 定</el-button>\n      </span>\n    </el-dialog>\n\n    <!-- 修改菜单对话框 -->\n    <el-dialog title=\"添加菜单\" :visible.sync=\"editMenuDialogVisible\" width=\"40%\">\n      <el-form\n        ref=\"editMenuFormRef\"\n        :model=\"editMenuForm\"\n        :rules=\"editMenuFormRules\"\n        label-width=\"110px\"\n      >\n        <el-form-item label=\"菜单名称\" prop=\"name\">\n          <el-input v-model=\"editMenuForm.name\" />\n        </el-form-item>\n        <el-form-item label=\"路径\" prop=\"path\">\n          <el-input v-model=\"editMenuForm.path\" />\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"editMenuDialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"editMenus\">确 定</el-button>\n      </span>\n    </el-dialog>\n\n    <!-- 手动添加菜单对话框 -->\n    <el-dialog title=\"添加菜单\" :visible.sync=\"handleAddMenuDialogVisible\" width=\"40%\">\n      <el-form\n        ref=\"handleEditMenuFormRef\"\n        :model=\"addMenuForm\"\n        :rules=\"addMenuFormRules\"\n        label-width=\"110px\"\n      >\n        <el-form-item label=\"菜单名称\" prop=\"name\">\n          <el-input v-model=\"addMenuForm.name\" />\n        </el-form-item>\n        <el-form-item label=\"前端路由\" prop=\"path\">\n          <el-input v-model=\"addMenuForm.path\" />\n        </el-form-item>\n        <el-form-item label=\"菜单级别\" prop=\"level\">\n          <el-input v-model=\"addMenuForm.level\" />\n        </el-form-item>\n        <el-form-item label=\"父菜单\" prop=\"parent\">\n          <el-input v-model=\"addMenuForm.parent\" />\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"handleAddMenuDialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"addMenus\">确 定</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { getmenu, deletemenu, editmenu, addmenu } from '@/api/permission'\n\nexport default {\n  data() {\n    return {\n      // 菜单列表\n      menu: [],\n      defaultProps: {\n        children: 'child',\n        label: 'name'\n      },\n      menuId: 100,\n      //   添加角色对话框\n      AddMenuDialogVisible: false,\n      //   手动添加对话框\n      handleAddMenuDialogVisible: false,\n      // 添加角色表单\n      addMenuForm: {},\n      //   添加角色表单验证\n      addMenuFormRules: {\n        name: [\n          { required: true, message: '请输入菜单名称', trigger: 'blur' },\n          { min: 2, max: 10, message: '菜单名称的长度在2～10个字', trigger: 'blur' }\n        ],\n        path: [\n          { required: true, message: '请输入路径', trigger: 'blur' }\n        ],\n        level: [\n          { required: true, message: '请输入菜单级别', trigger: 'blur' }\n        ],\n        parent: [\n          { required: true, message: '请输入父菜单id', trigger: 'blur' }\n        ]\n      },\n      //   修改角色对话框\n      editMenuDialogVisible: false,\n      // 修改角色表单\n      editMenuForm: {},\n      currentEditId: '',\n      //   添加角色表单验证\n      editMenuFormRules: {\n        name: [\n          { required: true, message: '请输入菜单名称', trigger: 'blur' },\n          { min: 2, max: 10, message: '菜单名称的长度在2～10个字', trigger: 'blur' }\n        ],\n        path: [\n          { required: true, message: '请输入路径', trigger: 'blur' },\n        ]\n      }\n    }\n  },\n  created() {\n    this.getMenu()\n  },\n  methods: {\n    getMenu() {\n      const data = { drop: true, tree: true, level: 1 }\n      getmenu(data).then(res => {\n        this.menu = res.data\n      })\n    },\n    // 显示添加菜单\n    showAddDialog(data) {\n      this.$set(this.addMenuForm, 'parent', data.id)\n      this.$set(this.addMenuForm, 'level', (data.level + 1))\n      this.AddMenuDialogVisible = true\n    },\n    showHandleAddDialog() {\n      this.handleAddMenuDialogVisible = true\n    },\n    // 添加菜单\n    addMenus() {\n      console.log(this.addMenuForm)\n      addmenu(this.addMenuForm).then(() => {\n        this.$message.success('添加菜单成功！')\n        this.addMenuForm = {}\n        this.getMenu()\n      })\n      this.handleAddMenuDialogVisible = false\n      this.AddMenuDialogVisible = false\n    },\n\n    // 删除菜单节点\n    remove(node, data) {\n      const parent = node.parent\n      const children = parent.data.child || parent.data\n      const index = children.findIndex(d => d.id === data.id)\n      this.$confirm('此操作将永久删除该文件, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        children.splice(index, 1)\n        // 接口后台删除\n        deletemenu(data.id).then(() => {\n        })\n\n        this.$message.success('删除成功！')\n      }).catch(() => {\n        this.$message.info('已取消删除！')\n      })\n    },\n    // 编辑菜单\n    showEditDialog(data) {\n      console.log(data)\n      this.currentEditId = data.id\n      this.editMenuDialogVisible = true\n    },\n    editMenus() {\n      editmenu(this.currentEditId, this.editMenuForm).then(() => {\n        this.$message.success('编辑菜单成功！')\n        this.editMenuForm = {}\n        this.getMenu()\n      })\n      this.editMenuDialogVisible = false\n    }\n  }\n}\n</script>\n\n<style scoped>\n.custom-tree-container {\n  width: 500px;\n}\n\n.custom-tree-node {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-size: 14px;\n  padding-right: 8px;\n}\n</style>\n"]}]}