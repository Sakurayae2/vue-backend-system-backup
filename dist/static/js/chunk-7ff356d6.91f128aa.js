(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7ff356d6"],{"0feb":function(e,t,i){"use strict";i.d(t,"g",(function(){return o})),i.d(t,"h",(function(){return n})),i.d(t,"a",(function(){return a})),i.d(t,"c",(function(){return r})),i.d(t,"e",(function(){return l})),i.d(t,"i",(function(){return m})),i.d(t,"d",(function(){return d})),i.d(t,"f",(function(){return u})),i.d(t,"b",(function(){return c}));var s=i("b775");function o(e){return Object(s["a"])({url:"/api/dwapi/system/permission/",method:"get",params:e})}function n(e){return Object(s["a"])({url:"/api/dwapi/system/permission/"+e+"/",method:"get"})}function a(e){return Object(s["a"])({url:"/api/dwapi/system/permission/",method:"post",data:e})}function r(e){return Object(s["a"])({url:"/api/dwapi/system/permission/"+e+"/",method:"delete"})}function l(e,t){return Object(s["a"])({url:"/api/dwapi/system/permission/"+e+"/",method:"patch",data:t})}function m(e){return Object(s["a"])({url:"/api/dwapi/system/menu/",method:"get",params:e})}function d(e){return Object(s["a"])({url:"/api/dwapi/system/menu/"+e+"/",method:"delete"})}function u(e,t){return Object(s["a"])({url:"/api/dwapi/system/menu/"+e+"/",method:"patch",data:t})}function c(e){return Object(s["a"])({url:"/api/dwapi/system/menu/",method:"post",data:e})}},b9e5:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-card",[i("el-row",{staticStyle:{"margin-bottom":"20px"},attrs:{gutter:20}},[i("el-col",{attrs:{span:6}},[i("el-input",{attrs:{placeholder:"请输入ID",clearable:""},model:{value:e.queryInfo.query,callback:function(t){e.$set(e.queryInfo,"query",t)},expression:"queryInfo.query"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getPermissionList},slot:"append"})],1)],1),i("el-col",{attrs:{span:4}},[i("el-button",{attrs:{type:"primary"},on:{click:e.showAddDialog}},[e._v("添加权限")])],1)],1),i("el-table",{attrs:{data:e.permissionList,border:"",stripe:""}},[i("el-table-column",{attrs:{type:"index",label:"#",align:"center"}}),i("el-table-column",{attrs:{label:"ID",prop:"id",width:"80px",align:"center"}}),i("el-table-column",{attrs:{label:"权限名称",prop:"authName",align:"center"}}),i("el-table-column",{attrs:{label:"请求方法",prop:"method",align:"center"}}),i("el-table-column",{attrs:{label:"路径",prop:"path",align:"center"}}),i("el-table-column",{attrs:{label:"是否在白名单",prop:"is_white",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[!1===t.row.is_white?i("el-tag",{attrs:{type:"info"}},[e._v("否")]):i("el-tag",[e._v("是")])]}}])}),i("el-table-column",{attrs:{label:"操作",width:"300px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(i){return e.showEditDialog(t.row.id,t.$index)}}},[e._v("编辑")]),i("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(i){return e.deletePermission(t.row.id)}}},[e._v("删除")])]}}])})],1),i("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{"current-page":e.queryInfo.pagenum,"page-sizes":[10,15,20],"page-size":e.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.totle},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),i("el-dialog",{attrs:{title:"添加用户",visible:e.addDialogVisible,width:"50%"},on:{"update:visible":function(t){e.addDialogVisible=t}}},[i("el-form",{attrs:{model:e.addPermissionForm,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"权限名称",prop:"authName"}},[i("el-input",{model:{value:e.addPermissionForm.authName,callback:function(t){e.$set(e.addPermissionForm,"authName",t)},expression:"addPermissionForm.authName"}})],1),i("el-form-item",{attrs:{label:"请求方法",prop:"method"}},[i("el-input",{model:{value:e.addPermissionForm.method,callback:function(t){e.$set(e.addPermissionForm,"method",t)},expression:"addPermissionForm.method"}})],1),i("el-form-item",{attrs:{label:"路径",prop:"path"}},[i("el-input",{model:{value:e.addPermissionForm.path,callback:function(t){e.$set(e.addPermissionForm,"path",t)},expression:"addPermissionForm.path"}})],1),i("el-form-item",{attrs:{label:"是否在白名单",prop:"is_white"}},[i("el-checkbox",{attrs:{size:"medium"},model:{value:e.addPermissionForm.is_white,callback:function(t){e.$set(e.addPermissionForm,"is_white",t)},expression:"addPermissionForm.is_white"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.addPermission}},[e._v("确 定")])],1)],1),i("el-dialog",{attrs:{title:"修改用户信息",visible:e.editDialogVisible,width:"50%"},on:{"update:visible":function(t){e.editDialogVisible=t}}},[i("el-form",{attrs:{model:e.editPermissionForm,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"ID"}},[i("el-input",{attrs:{disabled:""},model:{value:e.editPermissionForm.id,callback:function(t){e.$set(e.editPermissionForm,"id",t)},expression:"editPermissionForm.id"}})],1),i("el-form-item",{attrs:{label:"权限名称"}},[i("el-input",{model:{value:e.editPermissionForm.authName,callback:function(t){e.$set(e.editPermissionForm,"authName",t)},expression:"editPermissionForm.authName"}})],1),i("el-form-item",{attrs:{label:"请求方法",prop:"method"}},[i("el-input",{model:{value:e.editPermissionForm.method,callback:function(t){e.$set(e.editPermissionForm,"method",t)},expression:"editPermissionForm.method"}})],1),i("el-form-item",{attrs:{label:"路径",prop:"path"}},[i("el-input",{model:{value:e.editPermissionForm.path,callback:function(t){e.$set(e.editPermissionForm,"path",t)},expression:"editPermissionForm.path"}})],1),i("el-form-item",{attrs:{label:"是否在白名单",prop:"is_white"}},[i("el-checkbox",{attrs:{size:"medium"},model:{value:e.editPermissionForm.is_white,callback:function(t){e.$set(e.editPermissionForm,"is_white",t)},expression:"editPermissionForm.is_white"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.editUser}},[e._v("确 定")])],1)],1)],1)},o=[],n=(i("90df"),i("0feb")),a={data:function(){return{permissionList:[],queryInfo:{query:"",pagenum:1,pagesize:15},totle:0,addDialogVisible:!1,addPermissionForm:{authName:"",method:"",path:"",is_white:!1},method:["post","get","put","patch","delete"],editDialogVisible:!1,editPermissionForm:{}}},created:function(){this.getPermissionList()},methods:{getPermissionList:function(){var e=this;this.permissionList=[];var t=this.queryInfo.query;if(t)Object(n["h"])(t).then((function(t){console.log(t);var i=t.data;e.permissionList.push({id:i.id,authName:i.name,method:i.method,path:i.path,is_white:i.is_white})}));else{var i={page:this.queryInfo.pagenum,size:this.queryInfo.pagesize};Object(n["g"])(i).then((function(t){var i=t.data.results;e.totle=t.data.count;for(var s=0;s<i.length;s++)e.permissionList.push({id:i[s].id,authName:i[s].name,method:i[s].method,path:i[s].path,is_white:i[s].is_white})}))}},handleSizeChange:function(e){this.queryInfo.pagesize=e,this.getPermissionList()},handleCurrentChange:function(e){this.queryInfo.pagenum=e,this.getPermissionList()},showAddDialog:function(){this.addDialogVisible=!0},addPermission:function(){var e=this,t={name:this.addPermissionForm.authName,method:this.addPermissionForm.method,path:this.addPermissionForm.path,is_white:this.addPermissionForm.is_white};Object(n["a"])(t).then((function(){e.addPermissionForm.authName="",e.addPermissionForm.method="",e.addPermissionForm.path="",e.addPermissionForm.is_white=!1,e.addDialogVisible=!1,e.getPermissionList()}))},deletePermission:function(e){var t=this;console.log(e),Object(n["c"])(e).then((function(){t.getPermissionList()}))},showEditDialog:function(e,t){this.editPermissionForm.id=e,this.$set(this.editPermissionForm,"is_white",this.permissionList[t].is_white),this.editDialogVisible=!0},editUser:function(){var e=this,t=this.editPermissionForm.id,i={name:this.editPermissionForm.authName,method:this.editPermissionForm.method,path:this.editPermissionForm.path,is_white:this.editPermissionForm.is_white};Object(n["e"])(t,i).then((function(t){e.editPermissionForm={},e.editDialogVisible=!1,e.getPermissionList()}))}}},r=a,l=i("cba8"),m=Object(l["a"])(r,s,o,!1,null,"9e5b5f86",null);t["default"]=m.exports}}]);