(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-59ec2496"],{"0f9f":function(e,t,n){var a=n("7a3b"),r=Math.floor,i=function(e,t){var n=e.length,s=r(n/2);return n<8?o(e,t):l(e,i(a(e,0,s),t),i(a(e,s),t),t)},o=function(e,t){var n,a,r=e.length,i=1;while(i<r){a=i,n=e[i];while(a&&t(e[a-1],n)>0)e[a]=e[--a];a!==i++&&(e[a]=n)}return e},l=function(e,t,n,a){var r=t.length,i=n.length,o=0,l=0;while(o<r||l<i)e[o+l]=o<r&&l<i?a(t[o],n[l])<=0?t[o++]:n[l++]:o<r?t[o++]:n[l++];return e};e.exports=i},"3d2c":function(e,t,n){"use strict";var a=n("9d31"),r=n("6885"),i=n("1aa1"),o=n("bea6"),l=n("5d04"),s=n("097a"),c=n("5164"),p=n("0f9f"),u=n("f456"),d=n("b0af"),m=n("5414"),b=n("af39"),f=n("9d7b"),g=[],h=r(g.sort),y=r(g.push),T=c((function(){g.sort(void 0)})),v=c((function(){g.sort(null)})),w=u("sort"),x=!c((function(){if(b)return b<70;if(!(d&&d>3)){if(m)return!0;if(f)return f<603;var e,t,n,a,r="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(a=0;a<47;a++)g.push({k:t+a,v:n})}for(g.sort((function(e,t){return t.v-e.v})),a=0;a<g.length;a++)t=g[a].k.charAt(0),r.charAt(r.length-1)!==t&&(r+=t);return"DGBEFHACIJK"!==r}})),k=T||!v||!w||!x,_=function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:s(t)>s(n)?1:-1}};a({target:"Array",proto:!0,forced:k},{sort:function(e){void 0!==e&&i(e);var t=o(this);if(x)return void 0===e?h(t):h(t,e);var n,a,r=[],s=l(t);for(a=0;a<s;a++)a in t&&y(r,t[a]);p(r,_(e)),n=r.length,a=0;while(a<n)t[a]=r[a++];while(a<s)delete t[a++];return t}})},5414:function(e,t,n){var a=n("3c71");e.exports=/MSIE|Trident/.test(a)},"9d7b":function(e,t,n){var a=n("3c71"),r=a.match(/AppleWebKit\/(\d+)\./);e.exports=!!r&&+r[1]},b0af:function(e,t,n){var a=n("3c71"),r=a.match(/firefox\/(\d+)/i);e.exports=!!r&&+r[1]},f788:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[n("div",[n("el-radio-group",{on:{change:e.getTableData},model:{value:e.choose,callback:function(t){e.choose=t},expression:"choose"}},[n("el-radio-button",{attrs:{label:"全部"}}),n("el-radio-button",{attrs:{label:"推荐"}}),n("el-radio-button",{attrs:{label:"关注"}}),n("el-radio-button",{attrs:{label:"附近"}}),n("el-radio-button",{attrs:{label:"音乐"}}),n("el-radio-button",{attrs:{label:"聊天室"}}),n("el-radio-button",{attrs:{label:"广场舞"}}),n("el-radio-button",{attrs:{label:"象棋"}}),n("el-radio-button",{attrs:{label:"直播"}})],1)],1),n("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("+")])],1),n("el-card",{staticClass:"box-card"},[n("el-table",{attrs:{data:e.tableData,border:"",stripe:""}},[n("el-table-column",{attrs:{prop:"bannerId",label:"ID",width:"100",align:"center"}}),n("el-table-column",{attrs:{prop:"bannerType",label:"类型",width:"100",align:"center"}}),n("el-table-column",{attrs:{prop:"title",label:"标题",width:"150",align:"center"}}),n("el-table-column",{attrs:{prop:"imgUrl",label:"图片url",width:"500",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("el-image",{staticStyle:{width:"320px",height:"100px"},attrs:{src:e.row.imgUrl}})]}}])}),n("el-table-column",{attrs:{prop:"sort",label:"排序",width:"100",align:"center"}}),n("el-table-column",{attrs:{prop:"oprTime",label:"时间",align:"center"}}),n("el-table-column",{attrs:{prop:"",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-edit"},on:{click:function(n){"全部"!=t.row.bannerType?e.editSort(t.$index,t.row):e.edit(t.$index,t.row)}}}),n("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(n){"全部"!=t.row.bannerType?e.deleteBannerType(t.$index,t.row):e.deleteBanner(t.$index,t.row)}}})]}}])})],1),n("el-pagination",{staticStyle:{"margin-top":"30px"},attrs:{"current-page":e.param.page,"page-sizes":[10,20,50,100],"page-size":e.param.size,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handlePageChange}})],1),n("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible,width:"70%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"类型:",prop:"bannerType"}},[n("div",{staticStyle:{display:"flex","justify-content":"space-between",width:"500px"}},[n("el-checkbox-group",{on:{change:e.handleCheckedCitiesChange},model:{value:e.checkedCities,callback:function(t){e.checkedCities=t},expression:"checkedCities"}},e._l(e.cities,(function(t){return n("el-checkbox",{key:t,attrs:{label:t}},[e._v(e._s(t))])})),1),n("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")])],1)]),n("el-form-item",{attrs:{label:"标题:",prop:"title"}},[n("el-input",{staticStyle:{width:"500px"},attrs:{clearable:""},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),n("el-form-item",{attrs:{label:"内容:",prop:"content"}},[n("el-input",{staticStyle:{width:"500px"},attrs:{clearable:""},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1),n("el-form-item",{attrs:{label:"上传图片:"}},[n("div",{staticStyle:{display:"flex"}},[n("div",[n("input",{ref:"fileBtn",attrs:{type:"file",id:"file_btn",accept:"image/*"},on:{change:e.uploadImg}})]),n("div",[n("el-image",{staticStyle:{width:"100px","margin-right":"30px"},attrs:{src:e.image_load}})],1),n("div",[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.upload()}}},[e._v("上传")])],1)])]),n("el-button",{staticStyle:{"margin-left":"80px"},attrs:{type:"primary"},on:{click:function(t){e.flag_add?e.addBanner():e.updateBanner()}}},[e._v("保 存")])],1)],1),n("el-dialog",{attrs:{title:"修改sort",visible:e.dialogVisible_sort,width:"20%"},on:{"update:visible":function(t){e.dialogVisible_sort=t}}},[n("div",{staticStyle:{display:"flex"}},[n("el-input",{staticStyle:{width:"100px"},model:{value:e.sort_input,callback:function(t){e.sort_input=t},expression:"sort_input"}}),n("el-button",{attrs:{type:"primary"},on:{click:e.upgradeSort}},[e._v("修 改")])],1)])],1)},r=[],i=n("ed3b"),o=n("fd6a"),l=(n("d8ae"),n("3abb"),n("3d2c"),n("446a"),n("e186"),n("b775"));function s(e){return Object(l["a"])({url:"/api/pwapi/manage/banner/details",methods:"get",params:e})}function c(e){return Object(l["a"])({url:"/api/pwapi/manage/banner/newbanner",methods:"get",params:e})}function p(e){return Object(l["a"])({url:"/api/pwapi/manage/banner/oldbanner",methods:"get",params:e})}function u(e){return Object(l["a"])({url:"/api/pwapi/manage/banner/badtype",method:"get",params:e})}function d(e){return Object(l["a"])({url:"/api/pwapi/manage/banner/badbanner",methods:"get",params:e})}function m(e){return Object(l["a"])({url:"/api/pwapi/manage/banner/typeweight",methods:"get",params:e})}var b=n("52c1"),f=["推荐","关注","附近","音乐","聊天室","广场舞","象棋","直播"],g={data:function(){return{dialogTitle:"添加banner",sort_input:"",flag_add:!0,choose:"全部",param:{status:-1,page:1,size:10},total:0,tableData:[],form:{bannerType:"",imgUrl:"",content:"",title:"",sort:"",oprUser:""},dialogVisible:!1,dialogVisible_sort:!1,checkAll:!0,checkedCities:[],cities:f,isIndeterminate:!0,formData:"",image01:"",imgUrl:"",image_load:""}},created:function(){this.getTableData()},computed:Object(o["a"])({},Object(b["b"])(["username"])),methods:{uploadImg:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a,r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=t,console.log(e.target.files[0]),r=new FileReader,r.readAsDataURL(e.currentTarget.files[0]),r.onload=function(){console.log(r.result),a.image_load=r.result},i=new FormData,i.append("passwd","taolesoft0571"),i.append("image01",e.target.files[0]),t.formData=i;case 9:case"end":return n.stop()}}),n)})))()},upload:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post("http://www.suibo.tv/api/pwapi/user/image/banner/tourl",e.formData);case 2:n=t.sent,console.log(n),e.imgUrl=n.data.retData.url,console.log(e.imgUrl);case 6:case"end":return t.stop()}}),t)})))()},getTableData:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return"全部"===e.choose?e.param.status=-1:"推荐"===e.choose?e.param.status=0:"关注"===e.choose?e.param.status=1:"附近"===e.choose?e.param.status=2:"音乐"===e.choose?e.param.status=3:"聊天室"===e.choose?e.param.status=4:"广场舞"===e.choose?e.param.status=5:"象棋"===e.choose?e.param.status=6:"直播"===e.choose&&(e.param.status=10),t.next=3,s(e.param);case 3:n=t.sent,console.log(n),e.total=n.data.retData.total,e.tableData=n.data.retData.bannerInfo,e.tableData.forEach((function(e){-1==e.bannerType?e.bannerType="全部":0==e.bannerType?e.bannerType="推荐":1==e.bannerType?e.bannerType="关注":2==e.bannerType?e.bannerType="附近":3==e.bannerType?e.bannerType="音乐":4==e.bannerType?e.bannerType="聊天室":5==e.bannerType?e.bannerType="广场舞":6==e.bannerType?e.bannerType="象棋":10==e.bannerType&&(e.bannerType="直播")}));case 8:case"end":return t.stop()}}),t)})))()},add:function(){this.dialogTitle="添加banner",this.flag_add=!0,this.dialogVisible=!0,this.form.bannerType="",this.checkedCities=[],this.form.content="",this.form.title="",this.form.sort="",this.form.imgUrl="",this.image_load="";var e=document.getElementById("file_btn");null!=e&&(e.value="")},addBanner:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={bannerType:"",imgUrl:e.imgUrl,content:"",title:"",oprUser:e.username,ItPid:1,expireTime:"0000-00-00 00:00:00"},n.bannerType,console.log(e.checkedCities),e.checkedCities.forEach((function(e){"推荐"==e&&(n.bannerType+=",0"),"关注"==e&&(n.bannerType+=",1"),"附近"==e&&(n.bannerType+=",2"),"音乐"==e&&(n.bannerType+=",3"),"聊天室"==e&&(n.bannerType+=",4"),"广场舞"==e&&(n.bannerType+=",5"),"象棋"==e&&(n.bannerType+=",6"),"直播"==e&&(n.bannerType+=",10")})),n.bannerType=n.bannerType.slice(1),console.log("type:",n.bannerType),n.content=e.form.content,n.title=e.form.title,n.oprUser=e.username,t.next=11,c(n);case 11:a=t.sent,console.log(a),0===a.data.retCode&&e.$message.info(a.data.retData.msg),e.$refs.form.resetFields(),e.dialogVisible=!1,e.getTableData();case 17:case"end":return t.stop()}}),t)})))()},edit:function(e,t){this.dialogTitle="编辑banner",console.log(this.checkedCities),this.flag_add=!1,console.log(e,t),this.form.bannerType=t.bannerType,this.form.content=t.content,this.form.title=t.title,this.form.sort=t.sort,this.form.oprUser=this.username,this.form.id=t.bannerId,this.form.imgUrl=t.imgUrl,this.image_load="";var n=document.getElementById("file_btn");null!=n&&(n.value=""),this.dialogVisible=!0,console.log(this.form)},editSort:function(e,t){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n.dialogVisible_sort=!0,n.form.bannerType=t.bannerType,n.form.content=t.content,n.form.title=t.title,n.form.sort=t.sort,n.form.oprUser=n.username,n.form.id=t.bannerId,n.form.imgUrl=t.imgUrl,console.log(n.form);case 9:case"end":return e.stop()}}),e)})))()},upgradeSort:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e.form),n={id:100,type:1,sort:1e3},console.log(e.form),"推荐"==e.form.bannerType?n.type=0:"关注"==e.form.bannerType?n.type=1:"附近"==e.form.bannerType?n.type=2:"音乐"==e.form.bannerType?n.type=3:"聊天室"==e.form.bannerType?n.type=4:"广场舞"==e.form.bannerType?n.type=5:"象棋"==e.form.bannerType?n.type=6:"直播"==e.form.bannerType&&(n.type=10),n.id=e.form.id,n.sort=e.sort_input,t.next=8,m(n);case 8:a=t.sent,console.log(a),0===a.data.retCode&&e.$message.info(a.data.retData.msg),e.dialogVisible_sort=!1,e.getTableData();case 13:case"end":return t.stop()}}),t)})))()},updateBanner:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={id:100,bannerType:"",imgUrl:e.form.imgUrl,content:"ccc",title:"cc",oprUser:e.username},e.checkedCities.forEach((function(e){"推荐"==e&&(n.bannerType+=",0"),"关注"==e&&(n.bannerType+=",1"),"附近"==e&&(n.bannerType+=",2"),"音乐"==e&&(n.bannerType+=",3"),"聊天室"==e&&(n.bannerType+=",4"),"广场舞"==e&&(n.bannerType+=",5"),"象棋"==e&&(n.bannerType+=",6"),"直播"==e&&(n.bannerType+=",10")})),""!==e.imgUrl?n.imgUrl=e.imgUrl:(e.form.imgUrl.slice(49),n.imgUrl=e.form.imgUrl,console.log("url:",e.form.imgUrl)),n.id=e.form.id,n.content=e.form.content,n.title=e.form.title,t.next=8,p(n);case 8:a=t.sent,console.log(a),0===a.data.retCode&&e.$message.info(a.data.retData.msg),e.dialogVisible=!1,e.getTableData();case 13:case"end":return t.stop()}}),t)})))()},deleteBannerType:function(e,t){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={id:t.bannerId,type:1},"全部"===t.bannerType?a.type=-1:"推荐"===t.bannerType?a.type=0:"关注"===t.bannerType?a.type=1:"附近"===t.bannerType?a.type=2:"音乐"===t.bannerType?a.type=3:"聊天室"===t.bannerType?a.type=4:"广场舞"===t.bannerType?a.type=5:"象棋"===t.bannerType?a.type=6:"直播"===t.bannerType&&(a.type=10),e.next=4,u(a);case 4:r=e.sent,console.log(r),0===r.data.retCode&&n.$message.info(r.data.retData.msg),n.getTableData();case 8:case"end":return e.stop()}}),e)})))()},deleteBanner:function(e,t){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={id:t.bannerId},e.next=3,n.$confirm("此操作将永久删除该文件, 是否继续?","永久删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 3:if(r=e.sent,"confirm"===r){e.next=6;break}return e.abrupt("return",n.$message.info("取消删除"));case 6:return e.next=8,d(a).then((function(e){var t=e.data;if(console.log(t),0===t.retData.code)return n.$message.error(t.retData.msg);n.getTableData()}));case 8:case"end":return e.stop()}}),e)})))()},handleSizeChange:function(e){this.param.size=e,this.getTableData()},handlePageChange:function(e){this.param.page=e,this.getTableData()},handleCheckAllChange:function(e){this.checkedCities=e?f:[],this.isIndeterminate=!1},handleCheckedCitiesChange:function(e){var t=e.length;this.checkAll=t===this.cities.length,this.isIndeterminate=t>0&&t<this.cities.length}}},h=g,y=n("cba8"),T=Object(y["a"])(h,a,r,!1,null,null,null);t["default"]=T.exports}}]);