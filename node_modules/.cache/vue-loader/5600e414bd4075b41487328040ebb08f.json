{"remainingRequest":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\node_modules\\_vue-loader@15.9.8@vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\src\\views\\award\\officialUser.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\src\\views\\award\\officialUser.vue","mtime":1637930052000},{"path":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\node_modules\\_babel-loader@8.2.3@babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\node_modules\\_vue-loader@15.9.8@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldE9mZmljaWFsVXNlciwgYWRkT2ZmaWNpYWxVc2VyLCByZW1vdmVPZmZpY2lhbFVzZXIgfSBmcm9tICdAL2FwaS9hd2FyZCcKaW1wb3J0IHFzIGZyb20gJ3FzJwoKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBxdWVyeTogewogICAgICAgIHVpbl9saXN0OiAnJwogICAgICB9LAogICAgICBkeW5hbWljVGFnczogW10sCiAgICAgIHNlYXJjaElucHV0OiAnJwogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZm5HZXRMaXN0KCkKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOiOt+WPlgogICAgZm5HZXRMaXN0KCkgewogICAgICBnZXRPZmZpY2lhbFVzZXIoKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5keW5hbWljVGFncyA9IHJlcy5kYXRhLnJldERhdGEuZGF0YUxpc3QKICAgICAgfSkKICAgIH0sCiAgICAvLyDmt7vliqAKICAgIGZuQWRkVXNlcigpIHsKICAgICAgLy8g5Y676YeNCiAgICAgIGlmICh0aGlzLmR5bmFtaWNUYWdzLmluZGV4T2YoTnVtYmVyKHRoaXMucXVlcnkudWluX2xpc3QpKSAhPT0gLTEpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+WtmOWcqOmHjeWkjXVpbicpCiAgICAgICAgcmV0dXJuCiAgICAgIH0KICAgICAgY29uc3QgcmVnID0gL14oXGQqKSgsXGQrKSokLwogICAgICBpZiAocmVnLnRlc3QodGhpcy5xdWVyeS51aW5fbGlzdCkpIHsKICAgICAgICAvLyBjb25zb2xlLmxvZyhyZWcudGVzdCh0aGlzLnF1ZXJ5LnVpbl9saXN0KSkKICAgICAgICBhZGRPZmZpY2lhbFVzZXIocXMuc3RyaW5naWZ5KHRoaXMucXVlcnkpKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICBpZiAocmVzLmRhdGEucmV0RGF0YS5zdGF0dXNDb2RlID09PSAyMDApIHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmt7vliqDnlKjmiLflrpjmlrnorqTor4HmiJDlip8nKQogICAgICAgICAgICB0aGlzLnF1ZXJ5LnVpbl9saXN0ID0gJycKICAgICAgICAgICAgdGhpcy5mbkdldExpc3QoKQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfovpPlhaXmoLzlvI/kuI3mu6HotrPvvIzor7fmo4Dmn6XvvIzpgJflj7fku6Xoi7HmlofpmpTlvIAs5pyr5bC+5LiN6IO95Li66YCX5Y+3JykKICAgICAgfQogICAgfSwKICAgIC8vIOenu+mZpAogICAgZm5SZW1vdmVVc2VyKHRhZykgewogICAgICBjb25zdCBkYXRhID0geyB1aW46IHRhZyB9CiAgICAgIHJlbW92ZU9mZmljaWFsVXNlcihxcy5zdHJpbmdpZnkoZGF0YSkpLnRoZW4ocmVzID0+IHsKICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YS5yZXREYXRhLnN0YXR1c0NvZGUpCiAgICAgICAgaWYgKHJlcy5kYXRhLnJldERhdGEuc3RhdHVzQ29kZSA9PT0gMjAwKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+WPlua2iOeUqOaItycgKyB0YWcgKyAn5a6Y5pa56K6k6K+B5oiQ5YqfJykKICAgICAgICAgIHRoaXMuZHluYW1pY1RhZ3Muc3BsaWNlKHRoaXMuZHluYW1pY1RhZ3MuaW5kZXhPZih0YWcpLCAxKQogICAgICAgICAgdGhpcy5mbkdldExpc3QoKQogICAgICAgIH0KICAgICAgfSkKICAgIH0sCiAgICAvLyDmkJzntKLlt7LmnInnlKjmiLcKICAgIHNlYXJjaCgpIHsKICAgICAgdmFyIGluZGV4ID0gdGhpcy5keW5hbWljVGFncy5pbmRleE9mKE51bWJlcih0aGlzLnNlYXJjaElucHV0KSkKICAgICAgaWYgKGluZGV4ID09PSAtMSkgewogICAgICAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn5LiN5a2Y5Zyo6K+l55So5oi3JykKICAgICAgICByZXR1cm4KICAgICAgfQogICAgICBjb25zdCB0YWdzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgndGFncycpCiAgICAgIHRhZ3NbaW5kZXhdLnN0eWxlLmNvbG9yID0gJ3JlZCcKICAgICAgdGFnc1tpbmRleF0uc3R5bGUuYm9yZGVyQ29sb3IgPSAncmVkJwogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICB0YWdzW2luZGV4XS5zdHlsZS5jb2xvciA9ICcjNDA5RUZGJwogICAgICAgIHRhZ3NbaW5kZXhdLnN0eWxlLmJvcmRlckNvbG9yID0gJyNkOWVjZmYnCiAgICAgIH0sIDEwMDAwKQogICAgICB0aGlzLnNlYXJjaElucHV0ID0gJycKICAgIH0KICB9Cn0K"},{"version":3,"sources":["officialUser.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"officialUser.vue","sourceRoot":"src/views/award","sourcesContent":["<template>\n  <div class=\"pp-container\">\n    <el-card>\n      <el-row type=\"flex\" justify=\"space-between\" style=\"margin-bottom: 15px;\">\n        <el-col :span=\"12\">\n          <el-input v-model=\"query.uin_list\" placeholder=\"请输入uin,多uin格式如:123,456\" clearable @keyup.enter.native=\"fnAddUser\">\n            <el-button slot=\"append\" icon=\"el-icon-plus\" @click.native=\"fnAddUser\" />\n          </el-input>\n        </el-col>\n        <el-col :span=\"8\">\n          <el-input v-model=\"searchInput\" placeholder=\"请输入本地搜索的ID\" clearable @keyup.enter.native=\"search\">\n            <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"search\" />\n          </el-input>\n        </el-col>\n      </el-row>\n      <el-row :gutter=\"20\">\n        <el-col>\n          <p>官方认证用户:</p>\n          <div class=\"TestContent\">\n            <el-tag\n              v-for=\"tag in dynamicTags\"\n              :key=\"tag\"\n              closable\n              class=\"tags\"\n              :disable-transitions=\"false\"\n              @close=\"fnRemoveUser(tag)\"\n            >{{ tag }}\n            </el-tag>\n          </div>\n        </el-col>\n      </el-row>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport { getOfficialUser, addOfficialUser, removeOfficialUser } from '@/api/award'\nimport qs from 'qs'\n\nexport default {\n  data() {\n    return {\n      query: {\n        uin_list: ''\n      },\n      dynamicTags: [],\n      searchInput: ''\n    }\n  },\n  created() {\n    this.fnGetList()\n  },\n  methods: {\n    // 获取\n    fnGetList() {\n      getOfficialUser().then(res => {\n        this.dynamicTags = res.data.retData.dataList\n      })\n    },\n    // 添加\n    fnAddUser() {\n      // 去重\n      if (this.dynamicTags.indexOf(Number(this.query.uin_list)) !== -1) {\n        this.$message.warning('存在重复uin')\n        return\n      }\n      const reg = /^(\\d*)(,\\d+)*$/\n      if (reg.test(this.query.uin_list)) {\n        // console.log(reg.test(this.query.uin_list))\n        addOfficialUser(qs.stringify(this.query)).then(res => {\n          if (res.data.retData.statusCode === 200) {\n            this.$message.success('添加用户官方认证成功')\n            this.query.uin_list = ''\n            this.fnGetList()\n          }\n        })\n      } else {\n        this.$message.success('输入格式不满足，请检查，逗号以英文隔开,末尾不能为逗号')\n      }\n    },\n    // 移除\n    fnRemoveUser(tag) {\n      const data = { uin: tag }\n      removeOfficialUser(qs.stringify(data)).then(res => {\n        // console.log(res.data.retData.statusCode)\n        if (res.data.retData.statusCode === 200) {\n          this.$message.success('取消用户' + tag + '官方认证成功')\n          this.dynamicTags.splice(this.dynamicTags.indexOf(tag), 1)\n          this.fnGetList()\n        }\n      })\n    },\n    // 搜索已有用户\n    search() {\n      var index = this.dynamicTags.indexOf(Number(this.searchInput))\n      if (index === -1) {\n        this.$message.warning('不存在该用户')\n        return\n      }\n      const tags = document.getElementsByClassName('tags')\n      tags[index].style.color = 'red'\n      tags[index].style.borderColor = 'red'\n      setTimeout(() => {\n        tags[index].style.color = '#409EFF'\n        tags[index].style.borderColor = '#d9ecff'\n      }, 10000)\n      this.searchInput = ''\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.TestContent{\n  width: 90%;\n  min-height: 200px;\n  border: 1px solid #ccc;\n  margin-top: 20px;\n  padding: 10px;\n  border-radius: 5px;\n}\n.el-tag + .el-tag {\n  margin-top: 5px;\n  margin-left: 10px;\n}\n</style>\n"]}]}