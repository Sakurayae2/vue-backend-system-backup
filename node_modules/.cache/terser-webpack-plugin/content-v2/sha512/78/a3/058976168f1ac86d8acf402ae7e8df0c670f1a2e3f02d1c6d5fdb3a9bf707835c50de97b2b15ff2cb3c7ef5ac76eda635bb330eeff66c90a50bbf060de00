{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-df924806\"],{\"0bbd\":function(t,e,a){},\"103f\":function(t,e,a){\"use strict\";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"pp-container\"},[a(\"el-card\",[a(\"el-row\",{staticStyle:{\"margin-bottom\":\"15px\"},attrs:{type:\"flex\",justify:\"space-between\"}},[a(\"el-col\",{attrs:{span:8}},[a(\"el-input\",{attrs:{placeholder:\"请输入搜索实验名称\",clearable:\"\"},nativeOn:{keyup:function(e){return!e.type.indexOf(\"key\")&&t._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?null:t.search(e)}},model:{value:t.searchInput,callback:function(e){t.searchInput=e},expression:\"searchInput\"}},[a(\"el-button\",{attrs:{slot:\"append\",icon:\"el-icon-search\"},on:{click:t.search},slot:\"append\"})],1)],1),a(\"el-col\",[a(\"el-radio-group\",{staticStyle:{float:\"right\"},on:{change:function(e){return t.daysChange()}},model:{value:t.radio,callback:function(e){t.radio=e},expression:\"radio\"}},[a(\"el-radio-button\",{attrs:{label:\"实时\"}}),a(\"el-radio-button\",{attrs:{label:\"昨天\"}}),a(\"el-radio-button\",{attrs:{label:\"过去7天\"}})],1)],1),a(\"el-col\",{attrs:{span:4}},[a(\"el-button\",{staticStyle:{\"margin-left\":\"10px\"},attrs:{type:\"primary\",icon:\"el-icon-plus\"},on:{click:function(e){return t.fn_getLink()}}},[t._v(\"创建实验\")])],1)],1),a(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.loading,expression:\"loading\"}],attrs:{data:t.tableData}},[t._l(t.tableTitleData,(function(t,e){return a(\"el-table-column\",{key:e,attrs:{prop:t.prop,label:t.label,align:\"center\"}})})),a(\"el-table-column\",{attrs:{label:\"操作\",align:\"center\",width:\"120\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[a(\"el-popover\",{attrs:{placement:\"right\",width:\"380\"}},[a(\"div\",{staticClass:\"block\"},[a(\"el-date-picker\",{attrs:{type:\"daterange\",\"value-format\":\"yyyy-MM-dd\",\"range-separator\":\"-\",\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\"},model:{value:t.timeBucket,callback:function(e){t.timeBucket=e},expression:\"timeBucket\"}}),a(\"div\",{staticClass:\"exportTable\"},[a(\"el-button\",{attrs:{size:\"mini\",type:\"primary\",disabled:!t.timeBucket},nativeOn:{click:function(a){return a.preventDefault(),t.handleDownloadData(e.row)}}},[t._v(\"导出\")])],1)],1),a(\"el-button\",{attrs:{slot:\"reference\",type:\"text\",size:\"small\"},slot:\"reference\"},[t._v(\"导出\")])],1),a(\"el-button\",{staticStyle:{\"margin-left\":\"10px\"},attrs:{type:\"text\",size:\"small\"},nativeOn:{click:function(a){return a.preventDefault(),t.fn_edit(e.row)}}},[t._v(\"查看\")]),a(\"el-button\",{attrs:{type:\"text\",size:\"small\"},nativeOn:{click:function(a){return a.preventDefault(),t.fn_delete(e.$index,e.row)}}},[t._v(\"删除\")])]}}])})],2)],1),a(\"el-dialog\",{attrs:{title:t.state+\"实验页面\",visible:t.dialogFormVisible},on:{\"update:visible\":function(e){t.dialogFormVisible=e}}},[a(\"el-form\",{ref:\"ruleForm\",attrs:{model:t.form,rules:t.formRules}},[a(\"el-form-item\",{attrs:{label:\"实验名称\",prop:\"name\",\"label-width\":t.formLabelWidth}},[a(\"el-input\",{attrs:{placeholder:\"请输入实验名称\",disabled:\"创建\"!==t.state},model:{value:t.form.name,callback:function(e){t.$set(t.form,\"name\",e)},expression:\"form.name\"}})],1),a(\"el-form-item\",{attrs:{label:\"实验描述\",prop:\"desc\",\"label-width\":t.formLabelWidth}},[a(\"el-input\",{attrs:{type:\"textarea\",placeholder:\"请输入此次活动的描述\",disabled:\"创建\"!==t.state},model:{value:t.form.desc,callback:function(e){t.$set(t.form,\"desc\",e)},expression:\"form.desc\"}})],1),a(\"el-form-item\",{attrs:{label:\"分享链接1\",prop:\"link\",\"label-width\":t.formLabelWidth}},[a(\"el-input\",{attrs:{placeholder:\"该实验的分享链接\",disabled:\"\"},model:{value:t.form.link,callback:function(e){t.$set(t.form,\"link\",e)},expression:\"form.link\"}})],1),a(\"el-form-item\",{attrs:{label:\"房间类型\",prop:\"linktype\",\"label-width\":t.formLabelWidth}},[a(\"el-select\",{attrs:{placeholder:\"请选择房间类型\",disabled:\"创建\"!==t.state},model:{value:t.form.linktype,callback:function(e){t.$set(t.form,\"linktype\",e)},expression:\"form.linktype\"}},[a(\"el-option\",{attrs:{label:\"聊天房间\",value:\"0\"}}),a(\"el-option\",{attrs:{label:\"唱歌房间\",value:\"1\"}}),a(\"el-option\",{attrs:{label:\"舞蹈房间\",value:\"2\"}}),a(\"el-option\",{attrs:{label:\"象棋房间\",value:\"3\"}}),a(\"el-option\",{attrs:{label:\"直播房间\",value:\"25\"}})],1)],1),a(\"el-form-item\",{attrs:{label:\"linkid\",prop:\"linkid\",\"label-width\":t.formLabelWidth}},[a(\"el-input\",{attrs:{placeholder:\"友盟创建裂变活动对应的linkid\",disabled:\"创建\"!==t.state},model:{value:t.form.linkid,callback:function(e){t.$set(t.form,\"linkid\",e)},expression:\"form.linkid\"}})],1),a(\"el-form-item\",{attrs:{label:\"文案编辑位置1\",prop:\"text1\",\"label-width\":t.formLabelWidth}},[a(\"div\",[a(\"span\",[t._v(\"是否获取用户信息：\")]),a(\"el-radio\",{attrs:{label:\"1\"},on:{change:function(e){return t.radioTextChange(\"text1\")}},model:{value:t.radioText1,callback:function(e){t.radioText1=e},expression:\"radioText1\"}},[t._v(\"是\")]),a(\"el-radio\",{attrs:{label:\"2\"},on:{change:function(e){return t.radioTextChange(\"text1\")}},model:{value:t.radioText1,callback:function(e){t.radioText1=e},expression:\"radioText1\"}},[t._v(\"否\")])],1),a(\"el-input\",{attrs:{disabled:\"创建\"!==t.state||\"1\"===t.radioText1},model:{value:t.form.text1,callback:function(e){t.$set(t.form,\"text1\",e)},expression:\"form.text1\"}})],1),a(\"el-form-item\",{attrs:{label:\"文案编辑位置2\",prop:\"text2\",\"label-width\":t.formLabelWidth}},[a(\"div\",[a(\"span\",[t._v(\"是否获取用户信息：\")]),a(\"el-radio\",{attrs:{label:\"1\"},on:{change:function(e){return t.radioTextChange(\"text2\")}},model:{value:t.radioText2,callback:function(e){t.radioText2=e},expression:\"radioText2\"}},[t._v(\"是\")]),a(\"el-radio\",{attrs:{label:\"2\"},on:{change:function(e){return t.radioTextChange(\"text2\")}},model:{value:t.radioText2,callback:function(e){t.radioText2=e},expression:\"radioText2\"}},[t._v(\"否\")])],1),a(\"el-input\",{attrs:{disabled:\"创建\"!==t.state||\"1\"===t.radioText2},model:{value:t.form.text2,callback:function(e){t.$set(t.form,\"text2\",e)},expression:\"form.text2\"}})],1)],1),a(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"el-button\",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v(\"取 消\")]),a(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(e){return t.fn_create()}}},[t._v(t._s(t.state))])],1)],1)],1)},l=[],r=(a(\"d8ae\"),a(\"3abb\"),a(\"90df\"),a(\"2f1a\"),a(\"72e8\"),a(\"f34b\"),a(\"4be0\")),n=a(\"7733\"),o=a.n(n),s={inject:[\"reload\"],data:function(){return{radioText1:\"1\",radioText2:\"1\",customText:{text1:\"\",text2:\"\"},loading:!1,searchInput:\"\",radio:\"过去7天\",dialogFormVisible:!1,form:{text2:\"\",text1:\"\",linktype:\"\",link:\"\",name:\"\",desc:\"\",linkid:\"\"},formRules:{name:[{required:!0,message:\"此处不能为空\",trigger:\"blur\"}],desc:[{required:!0,message:\"此处不能为空\",trigger:\"blur\"}],linktype:[{required:!0,message:\"此处不能为空\",trigger:\"blur\"}],link:[{required:!0,message:\"此处不能为空\",trigger:\"blur\"}],linkid:[{required:!0,message:\"此处不能为空\",trigger:\"blur\"}],text1:[{required:!0,message:\"此处不能为空\",trigger:\"blur\"}],text2:[{required:!0,message:\"此处不能为空\",trigger:\"blur\"}]},formLabelWidth:\"120px\",state:\"创建\",timeBucket:\"\",timeExportBtn:!0,tableData:[],tableDataCache:[],tableTitleData:[{label:\"实验名称(链接)\",prop:\"name\"},{label:\"分享点击PV\",prop:\"shareClickPv\"},{label:\"分享点击UV\",prop:\"shareClickUv\"},{label:\"链接触发PV\",prop:\"linkClickPv\"},{label:\"链接触发UV\",prop:\"linkClickUv\"},{label:\"人均停留时间\",prop:\"totalDuration\"},{label:\"链接点击PV\",prop:\"downloadPv\"},{label:\"链接点击UV\",prop:\"downloadUv\"},{label:\"APP启动PV\",prop:\"\"},{label:\"APP启动UV\",prop:\"\"},{label:\"app新增人数\",prop:\"\"},{label:\"其他活动指标\",prop:\"\"}]}},created:function(){this.daysChange()},methods:{daysChange:function(){var t=this;this.loading=!0;var e={days:\"\"};\"实时\"===this.radio?e.days=\"\":\"昨天\"===this.radio?e.days=1:\"过去7天\"===this.radio&&(e.days=7),Object(r[\"p\"])(e).then((function(e){t.tableData=e.data.retData.dataDict,t.tableDataCache=t.tableData,t.loading=!1})).catch((function(){t.loading=!1}))},search:function(){var t=this;this.tableData=[],this.tableDataCache.forEach((function(e){-1!==e.name.indexOf(t.searchInput)&&t.tableData.push(e)}))},fn_edit:function(t){this.state=\"编辑\",this.dialogFormVisible=!0,this.form.index=t.index,this.form.name=t.name,this.form.desc=t.desc,this.form.text1=t.text1,this.form.text2=t.text2,this.form.link=t.link,this.form.linkid=t.u_link_id,this.form.linktype=t.linktype,this.form.cmd=\"edit\"},fn_delete:function(t,e){var a=this;this.$confirm(\"此操作将永久删除该文件, 是否继续?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then((function(){var i={cmd:\"delete\",index:e.index,linktype:e.linktype};console.log(i),Object(r[\"i\"])(o.a.stringify(i)).then((function(e){200===e.data.retData.msg&&(a.tableDataCache.splice(t,1),a.tableData=a.tableDataCache,a.$message.success(\"删除成功\"))}))})).catch((function(){a.$message.info(\"已取消删除\")}))},fn_getLink:function(){var t=this;this.dialogFormVisible=!0,this.state=\"创建\",Object(r[\"q\"])().then((function(e){t.form=e.data.retData.dataDict,t.radioTextChange(\"text1\"),t.radioTextChange(\"text2\")}))},radioTextChange:function(t){\"创建\"===this.state&&(\"text1\"===t&&\"1\"===this.radioText1?this.form.text1=\"已获取用户信息，将使用默认方案！\":\"text1\"===t&&(this.form.text1=this.customText.text1),\"text2\"===t&&\"1\"===this.radioText2?this.form.text2=\"已获取用户信息，将使用默认方案！\":\"text2\"===t&&(this.form.text2=this.customText.text2))},fn_create:function(){var t=this;\"创建\"===this.state?this.$refs[\"ruleForm\"].validate((function(e){e&&(\"1\"===t.radioText1&&(t.form.text1=\"no\"),\"1\"===t.radioText2&&(t.form.text2=\"no\"),Object(r[\"e\"])(o.a.stringify(t.form)).then((function(e){200===e.data.retData.msg&&(t.$message.success(\"创建成功\"),t.form={},t.customText.text1=\"\",t.customText.text2=\"\",t.dialogFormVisible=!1,t.reload())})))})):\"编辑\"===this.state&&Object(r[\"i\"])(o.a.stringify(this.form)).then((function(e){200===e.data.retData.msg&&(t.$message.success(\"编辑成功\"),t.form={},t.dialogFormVisible=!1,t.reload())}))},handleDownloadData:function(t){var e=this,i={index:t.index,start:this.timeBucket[0],end:this.timeBucket[1]},l=[];Object(r[\"j\"])(o.a.stringify(i)).then((function(t){t.data.retData.dataDict.dataLis.forEach((function(e){e.name=t.data.retData.dataDict.name,l.push(e)})),e.tableTitleData.unshift({label:\"日期\",prop:\"date\"});for(var i=e.tableTitleData,r=[],n=[],o=0;o<i.length;o++)r[o]=i[o].label,n[o]=i[o].prop;Promise.all([a.e(\"chunk-8bd81ed2\"),a.e(\"chunk-6022377b\")]).then(function(){var i=a(\"8530\"),o=i.export_json_to_excel,s=r,c=n,d=l,u=t.data.retData.dataDict.name,f=e.formatJson(c,d);o(s,f,u)}.bind(null,a)).catch(a.oe),e.tableTitleData.shift()}))},formatJson:function(t,e){return e.map((function(e){return t.map((function(t){return e[t]}))}))}}},c=s,d=(a(\"6121\"),a(\"cba8\")),u=Object(d[\"a\"])(c,i,l,!1,null,\"7e6db452\",null);e[\"default\"]=u.exports},\"2f1a\":function(t,e,a){\"use strict\";var i=a(\"9d31\"),l=a(\"3751\"),r=a(\"6055\");i({target:\"String\",proto:!0,forced:r(\"link\")},{link:function(t){return l(this,\"a\",\"href\",t)}})},3751:function(t,e,a){var i=a(\"6885\"),l=a(\"1cd4\"),r=a(\"097a\"),n=/\"/g,o=i(\"\".replace);t.exports=function(t,e,a,i){var s=r(l(t)),c=\"<\"+e;return\"\"!==a&&(c+=\" \"+a+'=\"'+o(r(i),n,\"&quot;\")+'\"'),c+\">\"+s+\"</\"+e+\">\"}},6055:function(t,e,a){var i=a(\"5164\");t.exports=function(t){return i((function(){var e=\"\"[t]('\"');return e!==e.toLowerCase()||e.split('\"').length>3}))}},6121:function(t,e,a){\"use strict\";a(\"0bbd\")},\"72e8\":function(t,e,a){\"use strict\";var i=a(\"9d31\"),l=a(\"4851\"),r=a(\"ce4f\"),n=a(\"6978\"),o=a(\"5d04\"),s=a(\"bea6\"),c=a(\"cc54\"),d=a(\"9a68\"),u=a(\"b59d\"),f=u(\"splice\"),m=l.TypeError,p=Math.max,b=Math.min,h=9007199254740991,x=\"Maximum allowed length exceeded\";i({target:\"Array\",proto:!0,forced:!f},{splice:function(t,e){var a,i,l,u,f,g,k=s(this),v=o(k),y=r(t,v),T=arguments.length;if(0===T?a=i=0:1===T?(a=0,i=v-y):(a=T-2,i=b(p(n(e),0),v-y)),v+a-i>h)throw m(x);for(l=c(k,i),u=0;u<i;u++)f=y+u,f in k&&d(l,u,k[f]);if(l.length=i,a<i){for(u=y;u<v-i;u++)f=u+i,g=u+a,f in k?k[g]=k[f]:delete k[g];for(u=v;u>v-i+a;u--)delete k[u-1]}else if(a>i)for(u=v-i;u>y;u--)f=u+i-1,g=u+a-1,f in k?k[g]=k[f]:delete k[g];for(u=0;u<a;u++)k[u+y]=arguments[u+2];return k.length=v-i+a,l}})}}]);","extractedComments":[]}