(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-47ec5292"],{"0ae1":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-card",[n("el-row",{staticStyle:{"margin-bottom":"30px"},attrs:{gutter:20}},[n("el-col",{attrs:{span:4}},[n("el-button",{attrs:{type:"primary"},on:{click:e.showHandleAddDialog}},[e._v("手动添加根菜单")])],1)],1),n("div",{staticClass:"custom-tree-container"},[n("div",{staticClass:"block"},[n("p",[e._v("权限菜单")]),n("el-tree",{attrs:{data:e.menu,"node-key":"id","default-expand-all":"",props:e.defaultProps,"expand-on-click-node":!1},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,a=t.data;return n("span",{staticClass:"custom-tree-node"},[n("span",[e._v(e._s(i.label))]),n("span",[1!==a.id?n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){return e.remove(i,a)}}},[e._v(" 删除 ")]):e._e(),1!==a.id?n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.showEditDialog(a)}}},[e._v(" 修改 ")]):e._e(),n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.showAddDialog(a)}}},[e._v(" 添加 ")])],1)])}}])})],1)])],1),n("el-dialog",{attrs:{title:"添加菜单",visible:e.AddMenuDialogVisible,width:"40%"},on:{"update:visible":function(t){e.AddMenuDialogVisible=t}}},[n("el-form",{ref:"addMenuFormRef",attrs:{model:e.addMenuForm,rules:e.addMenuFormRules,"label-width":"110px"}},[n("el-form-item",{attrs:{label:"菜单名称",prop:"name"}},[n("el-input",{model:{value:e.addMenuForm.name,callback:function(t){e.$set(e.addMenuForm,"name",t)},expression:"addMenuForm.name"}})],1),n("el-form-item",{attrs:{label:"路径",prop:"path"}},[n("el-input",{model:{value:e.addMenuForm.path,callback:function(t){e.$set(e.addMenuForm,"path",t)},expression:"addMenuForm.path"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.AddMenuDialogVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.addMenus}},[e._v("确 定")])],1)],1),n("el-dialog",{attrs:{title:"添加菜单",visible:e.editMenuDialogVisible,width:"40%"},on:{"update:visible":function(t){e.editMenuDialogVisible=t}}},[n("el-form",{ref:"editMenuFormRef",attrs:{model:e.editMenuForm,rules:e.editMenuFormRules,"label-width":"110px"}},[n("el-form-item",{attrs:{label:"菜单名称",prop:"name"}},[n("el-input",{model:{value:e.editMenuForm.name,callback:function(t){e.$set(e.editMenuForm,"name",t)},expression:"editMenuForm.name"}})],1),n("el-form-item",{attrs:{label:"路径",prop:"path"}},[n("el-input",{model:{value:e.editMenuForm.path,callback:function(t){e.$set(e.editMenuForm,"path",t)},expression:"editMenuForm.path"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.editMenuDialogVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.editMenus}},[e._v("确 定")])],1)],1),n("el-dialog",{attrs:{title:"添加菜单",visible:e.handleAddMenuDialogVisible,width:"40%"},on:{"update:visible":function(t){e.handleAddMenuDialogVisible=t}}},[n("el-form",{ref:"handleEditMenuFormRef",attrs:{model:e.addMenuForm,rules:e.addMenuFormRules,"label-width":"110px"}},[n("el-form-item",{attrs:{label:"菜单名称",prop:"name"}},[n("el-input",{model:{value:e.addMenuForm.name,callback:function(t){e.$set(e.addMenuForm,"name",t)},expression:"addMenuForm.name"}})],1),n("el-form-item",{attrs:{label:"前端路由",prop:"path"}},[n("el-input",{model:{value:e.addMenuForm.path,callback:function(t){e.$set(e.addMenuForm,"path",t)},expression:"addMenuForm.path"}})],1),n("el-form-item",{attrs:{label:"菜单级别",prop:"level"}},[n("el-input",{model:{value:e.addMenuForm.level,callback:function(t){e.$set(e.addMenuForm,"level",t)},expression:"addMenuForm.level"}})],1),n("el-form-item",{attrs:{label:"父菜单",prop:"parent"}},[n("el-input",{model:{value:e.addMenuForm.parent,callback:function(t){e.$set(e.addMenuForm,"parent",t)},expression:"addMenuForm.parent"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.handleAddMenuDialogVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.addMenus}},[e._v("确 定")])],1)],1)],1)},a=[],r=(n("c182"),n("72e8"),n("0feb")),o={data:function(){return{menu:[],defaultProps:{children:"child",label:"name"},menuId:100,AddMenuDialogVisible:!1,handleAddMenuDialogVisible:!1,addMenuForm:{},addMenuFormRules:{name:[{required:!0,message:"请输入菜单名称",trigger:"blur"},{min:2,max:10,message:"菜单名称的长度在2～10个字",trigger:"blur"}],path:[{required:!0,message:"请输入路径",trigger:"blur"}],level:[{required:!0,message:"请输入菜单级别",trigger:"blur"}],parent:[{required:!0,message:"请输入父菜单id",trigger:"blur"}]},editMenuDialogVisible:!1,editMenuForm:{},currentEditId:"",editMenuFormRules:{name:[{required:!0,message:"请输入菜单名称",trigger:"blur"},{min:2,max:10,message:"菜单名称的长度在2～10个字",trigger:"blur"}],path:[{required:!0,message:"请输入路径",trigger:"blur"}]}}},created:function(){this.getMenu()},methods:{getMenu:function(){var e=this,t={drop:!0,tree:!0,level:1};Object(r["i"])(t).then((function(t){e.menu=t.data}))},showAddDialog:function(e){this.$set(this.addMenuForm,"parent",e.id),this.$set(this.addMenuForm,"level",e.level+1),this.AddMenuDialogVisible=!0},showHandleAddDialog:function(){this.handleAddMenuDialogVisible=!0},addMenus:function(){var e=this;console.log(this.addMenuForm),Object(r["b"])(this.addMenuForm).then((function(){e.$message.success("添加菜单成功！"),e.addMenuForm={},e.getMenu()})),this.handleAddMenuDialogVisible=!1,this.AddMenuDialogVisible=!1},remove:function(e,t){var n=this,i=e.parent,a=i.data.child||i.data,o=a.findIndex((function(e){return e.id===t.id}));this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.splice(o,1),Object(r["d"])(t.id).then((function(){})),n.$message.success("删除成功！")})).catch((function(){n.$message.info("已取消删除！")}))},showEditDialog:function(e){console.log(e),this.currentEditId=e.id,this.editMenuDialogVisible=!0},editMenus:function(){var e=this;Object(r["f"])(this.currentEditId,this.editMenuForm).then((function(){e.$message.success("编辑菜单成功！"),e.editMenuForm={},e.getMenu()})),this.editMenuDialogVisible=!1}}},l=o,d=(n("dcb5"),n("cba8")),u=Object(d["a"])(l,i,a,!1,null,"ec62825e",null);t["default"]=u.exports},"0feb":function(e,t,n){"use strict";n.d(t,"g",(function(){return a})),n.d(t,"h",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"i",(function(){return u})),n.d(t,"d",(function(){return s})),n.d(t,"f",(function(){return c})),n.d(t,"b",(function(){return m}));var i=n("b775");function a(e){return Object(i["a"])({url:"/api/dwapi/system/permission/",method:"get",params:e})}function r(e){return Object(i["a"])({url:"/api/dwapi/system/permission/"+e+"/",method:"get"})}function o(e){return Object(i["a"])({url:"/api/dwapi/system/permission/",method:"post",data:e})}function l(e){return Object(i["a"])({url:"/api/dwapi/system/permission/"+e+"/",method:"delete"})}function d(e,t){return Object(i["a"])({url:"/api/dwapi/system/permission/"+e+"/",method:"patch",data:t})}function u(e){return Object(i["a"])({url:"/api/dwapi/system/menu/",method:"get",params:e})}function s(e){return Object(i["a"])({url:"/api/dwapi/system/menu/"+e+"/",method:"delete"})}function c(e,t){return Object(i["a"])({url:"/api/dwapi/system/menu/"+e+"/",method:"patch",data:t})}function m(e){return Object(i["a"])({url:"/api/dwapi/system/menu/",method:"post",data:e})}},"72e8":function(e,t,n){"use strict";var i=n("9d31"),a=n("4851"),r=n("ce4f"),o=n("6978"),l=n("5d04"),d=n("bea6"),u=n("cc54"),s=n("9a68"),c=n("b59d"),m=c("splice"),p=a.TypeError,f=Math.max,b=Math.min,h=9007199254740991,g="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!m},{splice:function(e,t){var n,i,a,c,m,M,v=d(this),F=l(v),w=r(e,F),x=arguments.length;if(0===x?n=i=0:1===x?(n=0,i=F-w):(n=x-2,i=b(f(o(t),0),F-w)),F+n-i>h)throw p(g);for(a=u(v,i),c=0;c<i;c++)m=w+c,m in v&&s(a,c,v[m]);if(a.length=i,n<i){for(c=w;c<F-i;c++)m=c+i,M=c+n,m in v?v[M]=v[m]:delete v[M];for(c=F;c>F-i+n;c--)delete v[c-1]}else if(n>i)for(c=F-i;c>w;c--)m=c+i-1,M=c+n-1,m in v?v[M]=v[m]:delete v[M];for(c=0;c<n;c++)v[c+w]=arguments[c+2];return v.length=F-i+n,a}})},b672:function(e,t,n){},c182:function(e,t,n){"use strict";var i=n("9d31"),a=n("8218").findIndex,r=n("f852"),o="findIndex",l=!0;o in[]&&Array(1)[o]((function(){l=!1})),i({target:"Array",proto:!0,forced:l},{findIndex:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),r(o)},dcb5:function(e,t,n){"use strict";n("b672")}}]);