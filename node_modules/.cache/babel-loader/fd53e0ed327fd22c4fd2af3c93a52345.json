{"remainingRequest":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\node_modules\\_babel-loader@8.2.3@babel-loader\\lib\\index.js!C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\src\\utils\\request.js","dependencies":[{"path":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\src\\utils\\request.js","mtime":1637930052000},{"path":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\babel.config.js","mtime":1637930052000},{"path":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Sakura\\Downloads\\Compressed\\suibo_backup_system\\node_modules\\_babel-loader@8.2.3@babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCB7IE1lc3NhZ2VCb3gsIE1lc3NhZ2UgfSBmcm9tICdlbGVtZW50LXVpJzsKaW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUnOwppbXBvcnQgeyBnZXRUb2tlbiB9IGZyb20gJ0AvdXRpbHMvYXV0aCc7CmltcG9ydCB7IGJhc2V1cmwgfSBmcm9tICdAL3NldHRpbmdzJzsgLy8gY3JlYXRlIGFuIGF4aW9zIGluc3RhbmNlCgp2YXIgc2VydmljZSA9IGF4aW9zLmNyZWF0ZSh7CiAgYmFzZVVSTDogYmFzZXVybCwKICAvLyB3aXRoQ3JlZGVudGlhbHM6IHRydWUsIC8vIHNlbmQgY29va2llcyB3aGVuIGNyb3NzLWRvbWFpbiByZXF1ZXN0cwogIHRpbWVvdXQ6IDUwMDAgLy8gcmVxdWVzdCB0aW1lb3V0Cgp9KTsgLy8gcmVxdWVzdCBpbnRlcmNlcHRvcgoKc2VydmljZS5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKGNvbmZpZykgewogIC8vIGRvIHNvbWV0aGluZyBiZWZvcmUgcmVxdWVzdCBpcyBzZW50CiAgLy8gY29uZmlnLmhlYWRlcnNbJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbiddID0gJyonCiAgaWYgKHN0b3JlLmdldHRlcnMudG9rZW4pIHsKICAgIC8vIGxldCBlYWNoIHJlcXVlc3QgY2FycnkgdG9rZW4KICAgIC8vIFsnWC1Ub2tlbiddIGlzIGEgY3VzdG9tIGhlYWRlcnMga2V5CiAgICAvLyBwbGVhc2UgbW9kaWZ5IGl0IGFjY29yZGluZyB0byB0aGUgYWN0dWFsIHNpdHVhdGlvbgogICAgY29uZmlnLmhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSA9ICdqd3QgJyArIGdldFRva2VuKCk7CiAgfQoKICByZXR1cm4gY29uZmlnOwp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAvLyBkbyBzb21ldGhpbmcgd2l0aCByZXF1ZXN0IGVycm9yCiAgY29uc29sZS5sb2coZXJyb3IpOyAvLyBmb3IgZGVidWcKCiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7IC8vIHJlc3BvbnNlIGludGVyY2VwdG9yCgpzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgdmFyIHN0YXR1cyA9IHJlc3BvbnNlLnN0YXR1czsKICB2YXIgcmVzID0gcmVzcG9uc2UuZGF0YTsgLy8gaWYgdGhlIGN1c3RvbSBjb2RlIGlzIG5vdCAyMDAwMCwgaXQgaXMganVkZ2VkIGFzIGFuIGVycm9yLgoKICBpZiAoc3RhdHVzID49IDQwMCAmJiBzdGF0dXMgPCA1MDApIHsKICAgIE1lc3NhZ2UoewogICAgICBtZXNzYWdlOiByZXMuZGV0YWlsIHx8ICd3YXJuaW5nJywKICAgICAgdHlwZTogJ3dhcm5pbmcnLAogICAgICBkdXJhdGlvbjogNSAqIDEwMDAKICAgIH0pOwogICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihyZXMuZGV0YWlsIHx8ICd3YXJuaW5nJykpOwogIH0gZWxzZSBpZiAoc3RhdHVzID49IDUwMCkgewogICAgTWVzc2FnZSh7CiAgICAgIG1lc3NhZ2U6IHJlcy5kZXRhaWwgfHwgJ2Vycm9yJywKICAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgZHVyYXRpb246IDUgKiAxMDAwCiAgICB9KTsKICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IocmVzLmRldGFpbCB8fCAnRXJyb3InKSk7CiAgfSBlbHNlIHsKICAgIHJldHVybiByZXNwb25zZTsKICB9Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIGNvbnNvbGUubG9nKCdlcnInICsgZXJyb3IpOyAvLyBmb3IgZGVidWcKCiAgTWVzc2FnZSh7CiAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLAogICAgdHlwZTogJ2Vycm9yJywKICAgIGR1cmF0aW9uOiA1ICogMTAwMAogIH0pOwogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOwpleHBvcnQgZGVmYXVsdCBzZXJ2aWNlOw=="},{"version":3,"sources":["C:/Users/Sakura/Downloads/Compressed/suibo_backup_system/src/utils/request.js"],"names":["axios","MessageBox","Message","store","getToken","baseurl","service","create","baseURL","timeout","interceptors","request","use","config","getters","token","headers","error","console","log","Promise","reject","response","status","res","data","message","detail","type","duration","Error"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,EAAqBC,OAArB,QAAoC,YAApC;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,SAASC,QAAT,QAAyB,cAAzB;AACA,SAASC,OAAT,QAAwB,YAAxB,C,CAEA;;AACA,IAAMC,OAAO,GAAGN,KAAK,CAACO,MAAN,CAAa;AAC3BC,EAAAA,OAAO,EAAEH,OADkB;AAE3B;AACAI,EAAAA,OAAO,EAAE,IAHkB,CAGb;;AAHa,CAAb,CAAhB,C,CAMA;;AACAH,OAAO,CAACI,YAAR,CAAqBC,OAArB,CAA6BC,GAA7B,CACE,UAAAC,MAAM,EAAI;AACR;AACA;AAEA,MAAIV,KAAK,CAACW,OAAN,CAAcC,KAAlB,EAAyB;AACvB;AACA;AACA;AACAF,IAAAA,MAAM,CAACG,OAAP,CAAe,eAAf,IAAkC,SAASZ,QAAQ,EAAnD;AACD;;AACD,SAAOS,MAAP;AACD,CAZH,EAaE,UAAAI,KAAK,EAAI;AACP;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ,EAFO,CAEY;;AACnB,SAAOG,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACD,CAjBH,E,CAoBA;;AAEAX,OAAO,CAACI,YAAR,CAAqBY,QAArB,CAA8BV,GAA9B,CACE,UAAAU,QAAQ,EAAI;AACV,MAAMC,MAAM,GAAGD,QAAQ,CAACC,MAAxB;AACA,MAAMC,GAAG,GAAGF,QAAQ,CAACG,IAArB,CAFU,CAGV;;AACA,MAAIF,MAAM,IAAI,GAAV,IAAiBA,MAAM,GAAG,GAA9B,EAAmC;AACjCrB,IAAAA,OAAO,CAAC;AACNwB,MAAAA,OAAO,EAAEF,GAAG,CAACG,MAAJ,IAAc,SADjB;AAENC,MAAAA,IAAI,EAAE,SAFA;AAGNC,MAAAA,QAAQ,EAAE,IAAI;AAHR,KAAD,CAAP;AAKA,WAAOT,OAAO,CAACC,MAAR,CAAe,IAAIS,KAAJ,CAAUN,GAAG,CAACG,MAAJ,IAAc,SAAxB,CAAf,CAAP;AACD,GAPD,MAOO,IAAIJ,MAAM,IAAI,GAAd,EAAmB;AACxBrB,IAAAA,OAAO,CAAC;AACNwB,MAAAA,OAAO,EAAEF,GAAG,CAACG,MAAJ,IAAc,OADjB;AAENC,MAAAA,IAAI,EAAE,OAFA;AAGNC,MAAAA,QAAQ,EAAE,IAAI;AAHR,KAAD,CAAP;AAKA,WAAOT,OAAO,CAACC,MAAR,CAAe,IAAIS,KAAJ,CAAUN,GAAG,CAACG,MAAJ,IAAc,OAAxB,CAAf,CAAP;AACD,GAPM,MAOA;AACL,WAAOL,QAAP;AACD;AACF,CAtBH,EAuBE,UAAAL,KAAK,EAAI;AACPC,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAQF,KAApB,EADO,CACoB;;AAC3Bf,EAAAA,OAAO,CAAC;AACNwB,IAAAA,OAAO,EAAET,KAAK,CAACS,OADT;AAENE,IAAAA,IAAI,EAAE,OAFA;AAGNC,IAAAA,QAAQ,EAAE,IAAI;AAHR,GAAD,CAAP;AAKA,SAAOT,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACD,CA/BH;AAiCA,eAAeX,OAAf","sourcesContent":["import axios from 'axios'\nimport { MessageBox, Message } from 'element-ui'\nimport store from '@/store'\nimport { getToken } from '@/utils/auth'\nimport { baseurl } from '@/settings'\n\n// create an axios instance\nconst service = axios.create({\n  baseURL: baseurl,\n  // withCredentials: true, // send cookies when cross-domain requests\n  timeout: 5000 // request timeout\n})\n\n// request interceptor\nservice.interceptors.request.use(\n  config => {\n    // do something before request is sent\n    // config.headers['Access-Control-Allow-Origin'] = '*'\n\n    if (store.getters.token) {\n      // let each request carry token\n      // ['X-Token'] is a custom headers key\n      // please modify it according to the actual situation\n      config.headers['Authorization'] = 'jwt ' + getToken()\n    }\n    return config\n  },\n  error => {\n    // do something with request error\n    console.log(error) // for debug\n    return Promise.reject(error)\n  }\n)\n\n// response interceptor\n\nservice.interceptors.response.use(\n  response => {\n    const status = response.status\n    const res = response.data\n    // if the custom code is not 20000, it is judged as an error.\n    if (status >= 400 && status < 500) {\n      Message({\n        message: res.detail || 'warning',\n        type: 'warning',\n        duration: 5 * 1000\n      })\n      return Promise.reject(new Error(res.detail || 'warning'))\n    } else if (status >= 500) {\n      Message({\n        message: res.detail || 'error',\n        type: 'error',\n        duration: 5 * 1000\n      })\n      return Promise.reject(new Error(res.detail || 'Error'))\n    } else {\n      return response\n    }\n  },\n  error => {\n    console.log('err' + error) // for debug\n    Message({\n      message: error.message,\n      type: 'error',\n      duration: 5 * 1000\n    })\n    return Promise.reject(error)\n  }\n)\nexport default service\n"]}]}